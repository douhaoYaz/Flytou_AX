(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ax2"],{"02c0":function(e,t,r){},"04d1":function(e,t,r){var n=r("342f"),i=n.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"057f":function(e,t,r){var n=r("c6b6"),i=r("fc6a"),o=r("241c").f,a=r("4dae"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return o(e)}catch(t){return a(s)}};e.exports.f=function(e){return s&&"Window"==n(e)?u(e):o(i(e))}},"0b25":function(e,t,r){var n=r("da84"),i=r("5926"),o=r("50c4"),a=n.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),r=o(t);if(t!==r)throw a("Wrong length or index");return r}},"0b42":function(e,t,r){var n=r("da84"),i=r("e8b5"),o=r("68ee"),a=r("861d"),s=r("b622"),u=s("species"),c=n.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,o(t)&&(t===c||i(t.prototype))?t=void 0:a(t)&&(t=t[u],null===t&&(t=void 0))),void 0===t?c:t}},"0c47":function(e,t,r){var n=r("da84"),i=r("d44e");i(n.JSON,"JSON",!0)},"0cb2":function(e,t,r){var n=r("e330"),i=r("7b0b"),o=Math.floor,a=n("".charAt),s=n("".replace),u=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,l,d){var h=r+e.length,p=n.length,v=f;return void 0!==l&&(l=i(l),v=c),s(d,v,(function(i,s){var c;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,r);case"'":return u(t,h);case"<":c=l[u(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>p){var d=o(f/10);return 0===d?i:d<=p?void 0===n[d-1]?a(s,1):n[d-1]+a(s,1):i}c=n[f-1]}return void 0===c?"":c}))}},"0d3b":function(e,t,r){var n=r("d039"),i=r("b622"),o=r("c430"),a=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),r+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"107c":function(e,t,r){var n=r("d039"),i=r("da84"),o=i.RegExp;e.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"143c":function(e,t,r){var n=r("74e8");n("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},1448:function(e,t,r){var n=r("dfb9"),i=r("b6b7");e.exports=function(e,t){return n(i(e),t)}},"145e":function(e,t,r){"use strict";var n=r("7b0b"),i=r("23cb"),o=r("07fa"),a=Math.min;e.exports=[].copyWithin||function(e,t){var r=n(this),s=o(r),u=i(e,s),c=i(t,s),f=arguments.length>2?arguments[2]:void 0,l=a((void 0===f?s:i(f,s))-c,s-u),d=1;c<u&&u<c+l&&(d=-1,c+=l-1,u+=l-1);while(l-- >0)c in r?r[u]=r[c]:delete r[u],u+=d,c+=d;return r}},"14c3":function(e,t,r){var n=r("da84"),i=r("c65b"),o=r("825a"),a=r("1626"),s=r("c6b6"),u=r("9263"),c=n.TypeError;e.exports=function(e,t){var r=e.exec;if(a(r)){var n=i(r,e,t);return null!==n&&o(n),n}if("RegExp"===s(e))return i(u,e,t);throw c("RegExp#exec called on incompatible receiver")}},"159b":function(e,t,r){var n=r("da84"),i=r("fdbc"),o=r("785a"),a=r("17c2"),s=r("9112"),u=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var c in i)i[c]&&u(n[c]&&n[c].prototype);u(o)},"170b":function(e,t,r){"use strict";var n=r("ebb5"),i=r("50c4"),o=r("23cb"),a=r("b6b7"),s=n.aTypedArray,u=n.exportTypedArrayMethod;u("subarray",(function(e,t){var r=s(this),n=r.length,u=o(e,n),c=a(r);return new c(r.buffer,r.byteOffset+u*r.BYTES_PER_ELEMENT,i((void 0===t?n:o(t,n))-u))}))},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,i=r("a640"),o=i("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"182d":function(e,t,r){var n=r("da84"),i=r("f8cd"),o=n.RangeError;e.exports=function(e,t){var r=i(e);if(r%t)throw o("Wrong offset");return r}},"1bf2":function(e,t,r){var n=r("23e7"),i=r("56ef");n({target:"Reflect",stat:!0},{ownKeys:i})},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("d3b7");function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}},"1dde":function(e,t,r){var n=r("d039"),i=r("b622"),o=r("2d00"),a=i("species");e.exports=function(e){return o>=51||!n((function(){var t=[],r=t.constructor={};return r[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"219c":function(e,t,r){"use strict";var n=r("da84"),i=r("e330"),o=r("d039"),a=r("59ed"),s=r("addb"),u=r("ebb5"),c=r("04d1"),f=r("d998"),l=r("2d00"),d=r("512ce"),h=n.Array,p=u.aTypedArray,v=u.exportTypedArrayMethod,y=n.Uint16Array,g=y&&i(y.prototype.sort),m=!!g&&!(o((function(){g(new y(2),null)}))&&o((function(){g(new y(2),{})}))),b=!!g&&!o((function(){if(l)return l<74;if(c)return c<67;if(f)return!0;if(d)return d<602;var e,t,r=new y(516),n=h(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(g(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0})),w=function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!==r?-1:t!==t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}};v("sort",(function(e){return void 0!==e&&a(e),b?g(this,e):s(p(this),w(e))}),!b||m)},"23dc":function(e,t,r){var n=r("d44e");n(Math,"Math",!0)},2532:function(e,t,r){"use strict";var n=r("23e7"),i=r("e330"),o=r("5a34"),a=r("1d80"),s=r("577e"),u=r("ab13"),c=i("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~c(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},"25a1":function(e,t,r){"use strict";var n=r("ebb5"),i=r("d58f").right,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},"25f0":function(e,t,r){"use strict";var n=r("e330"),i=r("5e77").PROPER,o=r("6eeb"),a=r("825a"),s=r("3a9b"),u=r("577e"),c=r("d039"),f=r("ad6d"),l="toString",d=RegExp.prototype,h=d[l],p=n(f),v=c((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),y=i&&h.name!=l;(v||y)&&o(RegExp.prototype,l,(function(){var e=a(this),t=u(e.source),r=e.flags,n=u(void 0===r&&s(d,e)&&!("flags"in d)?p(e):r);return"/"+t+"/"+n}),{unsafe:!0})},2954:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b6b7"),o=r("d039"),a=r("f36a"),s=n.aTypedArray,u=n.exportTypedArrayMethod,c=o((function(){new Int8Array(1).slice()}));u("slice",(function(e,t){var r=a(s(this),e,t),n=i(this),o=0,u=r.length,c=new n(u);while(u>o)c[o]=r[o++];return c}),c)},"2b3d":function(e,t,r){"use strict";r("3ca3");var n,i=r("23e7"),o=r("83ab"),a=r("0d3b"),s=r("da84"),u=r("0366"),c=r("e330"),f=r("37e8"),l=r("6eeb"),d=r("19aa"),h=r("1a2d"),p=r("60da"),v=r("4df4"),y=r("4dae"),g=r("6547").codeAt,m=r("5fb2"),b=r("577e"),w=r("d44e"),E=r("9861"),_=r("69f3"),A=_.set,S=_.getterFor("URL"),T=E.URLSearchParams,x=E.getState,R=s.URL,k=s.TypeError,O=s.parseInt,P=Math.floor,I=Math.pow,L=c("".charAt),D=c(/./.exec),C=c([].join),F=c(1..toString),M=c([].pop),N=c([].push),U=c("".replace),j=c([].shift),B=c("".split),G=c("".slice),H=c("".toLowerCase),W=c([].unshift),z="Invalid authority",V="Invalid scheme",q="Invalid host",Y="Invalid port",$=/[a-z]/i,K=/[\d+-.a-z]/i,J=/\d/,X=/^0x/i,Z=/^[0-7]+$/,Q=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ie=/[\t\n\r]/g,oe=function(e){var t,r,n,i,o,a,s,u=B(e,".");if(u.length&&""==u[u.length-1]&&u.length--,t=u.length,t>4)return e;for(r=[],n=0;n<t;n++){if(i=u[n],""==i)return e;if(o=10,i.length>1&&"0"==L(i,0)&&(o=D(X,i)?16:8,i=G(i,8==o?1:2)),""===i)a=0;else{if(!D(10==o?Q:8==o?Z:ee,i))return e;a=O(i,o)}N(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=I(256,5-t))return null}else if(a>255)return null;for(s=M(r),n=0;n<r.length;n++)s+=r[n]*I(256,3-n);return s},ae=function(e){var t,r,n,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,f=null,l=0,d=function(){return L(e,l)};if(":"==d()){if(":"!=L(e,1))return;l+=2,c++,f=c}while(d()){if(8==c)return;if(":"!=d()){t=r=0;while(r<4&&D(ee,d()))t=16*t+O(d(),16),l++,r++;if("."==d()){if(0==r)return;if(l-=r,c>6)return;n=0;while(d()){if(i=null,n>0){if(!("."==d()&&n<4))return;l++}if(!D(J,d()))return;while(D(J,d())){if(o=O(d(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;l++}u[c]=256*u[c]+i,n++,2!=n&&4!=n||c++}if(4!=n)return;break}if(":"==d()){if(l++,!d())return}else if(d())return;u[c++]=t}else{if(null!==f)return;l++,c++,f=c}}if(null!==f){a=c-f,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[f+a-1],u[f+--a]=s}else if(8!=c)return;return u},se=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t},ue=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)W(t,e%256),e=P(e/256);return C(t,".")}if("object"==typeof e){for(t="",n=se(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=F(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},ce={},fe=p({},ce,{" ":1,'"':1,"<":1,">":1,"`":1}),le=p({},fe,{"#":1,"?":1,"{":1,"}":1}),de=p({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),he=function(e,t){var r=g(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},pe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ve=function(e,t){var r;return 2==e.length&&D($,L(e,0))&&(":"==(r=L(e,1))||!t&&"|"==r)},ye=function(e){var t;return e.length>1&&ve(G(e,0,2))&&(2==e.length||"/"===(t=L(e,2))||"\\"===t||"?"===t||"#"===t)},ge=function(e){return"."===e||"%2e"===H(e)},me=function(e){return e=H(e),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},be={},we={},Ee={},_e={},Ae={},Se={},Te={},xe={},Re={},ke={},Oe={},Pe={},Ie={},Le={},De={},Ce={},Fe={},Me={},Ne={},Ue={},je={},Be=function(e,t,r){var n,i,o,a=b(e);if(t){if(i=this.parse(a),i)throw k(i);this.searchParams=null}else{if(void 0!==r&&(n=new Be(r,!0)),i=this.parse(a,null,n),i)throw k(i);o=x(new T),o.bindURL(this),this.searchParams=o}};Be.prototype={type:"URL",parse:function(e,t,r){var i,o,a,s,u=this,c=t||be,f=0,l="",d=!1,p=!1,g=!1;e=b(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=U(e,ne,"")),e=U(e,ie,""),i=v(e);while(f<=i.length){switch(o=i[f],c){case be:if(!o||!D($,o)){if(t)return V;c=Ee;continue}l+=H(o),c=we;break;case we:if(o&&(D(K,o)||"+"==o||"-"==o||"."==o))l+=H(o);else{if(":"!=o){if(t)return V;l="",c=Ee,f=0;continue}if(t&&(u.isSpecial()!=h(pe,l)||"file"==l&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=l,t)return void(u.isSpecial()&&pe[u.scheme]==u.port&&(u.port=null));l="","file"==u.scheme?c=Le:u.isSpecial()&&r&&r.scheme==u.scheme?c=_e:u.isSpecial()?c=xe:"/"==i[f+1]?(c=Ae,f++):(u.cannotBeABaseURL=!0,N(u.path,""),c=Ne)}break;case Ee:if(!r||r.cannotBeABaseURL&&"#"!=o)return V;if(r.cannotBeABaseURL&&"#"==o){u.scheme=r.scheme,u.path=y(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,c=je;break}c="file"==r.scheme?Le:Se;continue;case _e:if("/"!=o||"/"!=i[f+1]){c=Se;continue}c=Re,f++;break;case Ae:if("/"==o){c=ke;break}c=Me;continue;case Se:if(u.scheme=r.scheme,o==n)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=y(r.path),u.query=r.query;else if("/"==o||"\\"==o&&u.isSpecial())c=Te;else if("?"==o)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=y(r.path),u.query="",c=Ue;else{if("#"!=o){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=y(r.path),u.path.length--,c=Me;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=y(r.path),u.query=r.query,u.fragment="",c=je}break;case Te:if(!u.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,c=Me;continue}c=ke}else c=Re;break;case xe:if(c=Re,"/"!=o||"/"!=L(l,f+1))continue;f++;break;case Re:if("/"!=o&&"\\"!=o){c=ke;continue}break;case ke:if("@"==o){d&&(l="%40"+l),d=!0,a=v(l);for(var m=0;m<a.length;m++){var w=a[m];if(":"!=w||g){var E=he(w,de);g?u.password+=E:u.username+=E}else g=!0}l=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(d&&""==l)return z;f-=v(l).length+1,l="",c=Oe}else l+=o;break;case Oe:case Pe:if(t&&"file"==u.scheme){c=Ce;continue}if(":"!=o||p){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(u.isSpecial()&&""==l)return q;if(t&&""==l&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(l),s)return s;if(l="",c=Fe,t)return;continue}"["==o?p=!0:"]"==o&&(p=!1),l+=o}else{if(""==l)return q;if(s=u.parseHost(l),s)return s;if(l="",c=Ie,t==Pe)return}break;case Ie:if(!D(J,o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()||t){if(""!=l){var _=O(l,10);if(_>65535)return Y;u.port=u.isSpecial()&&_===pe[u.scheme]?null:_,l=""}if(t)return;c=Fe;continue}return Y}l+=o;break;case Le:if(u.scheme="file","/"==o||"\\"==o)c=De;else{if(!r||"file"!=r.scheme){c=Me;continue}if(o==n)u.host=r.host,u.path=y(r.path),u.query=r.query;else if("?"==o)u.host=r.host,u.path=y(r.path),u.query="",c=Ue;else{if("#"!=o){ye(C(y(i,f),""))||(u.host=r.host,u.path=y(r.path),u.shortenPath()),c=Me;continue}u.host=r.host,u.path=y(r.path),u.query=r.query,u.fragment="",c=je}}break;case De:if("/"==o||"\\"==o){c=Ce;break}r&&"file"==r.scheme&&!ye(C(y(i,f),""))&&(ve(r.path[0],!0)?N(u.path,r.path[0]):u.host=r.host),c=Me;continue;case Ce:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&ve(l))c=Me;else if(""==l){if(u.host="",t)return;c=Fe}else{if(s=u.parseHost(l),s)return s;if("localhost"==u.host&&(u.host=""),t)return;l="",c=Fe}continue}l+=o;break;case Fe:if(u.isSpecial()){if(c=Me,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=n&&(c=Me,"/"!=o))continue}else u.fragment="",c=je;else u.query="",c=Ue;break;case Me:if(o==n||"/"==o||"\\"==o&&u.isSpecial()||!t&&("?"==o||"#"==o)){if(me(l)?(u.shortenPath(),"/"==o||"\\"==o&&u.isSpecial()||N(u.path,"")):ge(l)?"/"==o||"\\"==o&&u.isSpecial()||N(u.path,""):("file"==u.scheme&&!u.path.length&&ve(l)&&(u.host&&(u.host=""),l=L(l,0)+":"),N(u.path,l)),l="","file"==u.scheme&&(o==n||"?"==o||"#"==o))while(u.path.length>1&&""===u.path[0])j(u.path);"?"==o?(u.query="",c=Ue):"#"==o&&(u.fragment="",c=je)}else l+=he(o,le);break;case Ne:"?"==o?(u.query="",c=Ue):"#"==o?(u.fragment="",c=je):o!=n&&(u.path[0]+=he(o,ce));break;case Ue:t||"#"!=o?o!=n&&("'"==o&&u.isSpecial()?u.query+="%27":u.query+="#"==o?"%23":he(o,ce)):(u.fragment="",c=je);break;case je:o!=n&&(u.fragment+=he(o,fe));break}f++}},parseHost:function(e){var t,r,n;if("["==L(e,0)){if("]"!=L(e,e.length-1))return q;if(t=ae(G(e,1,-1)),!t)return q;this.host=t}else if(this.isSpecial()){if(e=m(e),D(te,e))return q;if(t=oe(e),null===t)return q;this.host=t}else{if(D(re,e))return q;for(t="",r=v(e),n=0;n<r.length;n++)t+=he(r[n],ce);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return h(pe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&ve(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=ue(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+C(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(e){var t=this.parse(e);if(t)throw k(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ge(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+ue(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",be)},getUsername:function(){return this.username},setUsername:function(e){var t=v(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=he(t[r],de)}},getPassword:function(){return this.password},setPassword:function(e){var t=v(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=he(t[r],de)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ue(e):ue(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Oe)},getHostname:function(){var e=this.host;return null===e?"":ue(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Pe)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=b(e),""==e?this.port=null:this.parse(e,Ie))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+C(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Fe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=b(e),""==e?this.query=null:("?"==L(e,0)&&(e=G(e,1)),this.query="",this.parse(e,Ue)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){e=b(e),""!=e?("#"==L(e,0)&&(e=G(e,1)),this.fragment="",this.parse(e,je)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ge=function(e){var t=d(this,He),r=arguments.length>1?arguments[1]:void 0,n=A(t,new Be(e,!1,r));o||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},He=Ge.prototype,We=function(e,t){return{get:function(){return S(this)[e]()},set:t&&function(e){return S(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&f(He,{href:We("serialize","setHref"),origin:We("getOrigin"),protocol:We("getProtocol","setProtocol"),username:We("getUsername","setUsername"),password:We("getPassword","setPassword"),host:We("getHost","setHost"),hostname:We("getHostname","setHostname"),port:We("getPort","setPort"),pathname:We("getPathname","setPathname"),search:We("getSearch","setSearch"),searchParams:We("getSearchParams"),hash:We("getHash","setHash")}),l(He,"toJSON",(function(){return S(this).serialize()}),{enumerable:!0}),l(He,"toString",(function(){return S(this).serialize()}),{enumerable:!0}),R){var ze=R.createObjectURL,Ve=R.revokeObjectURL;ze&&l(Ge,"createObjectURL",u(ze,R)),Ve&&l(Ge,"revokeObjectURL",u(Ve,R))}w(Ge,"URL"),i({global:!0,forced:!a,sham:!o},{URL:Ge})},"2ca0":function(e,t,r){"use strict";var n=r("23e7"),i=r("e330"),o=r("06cf").f,a=r("50c4"),s=r("577e"),u=r("5a34"),c=r("1d80"),f=r("ab13"),l=r("c430"),d=i("".startsWith),h=i("".slice),p=Math.min,v=f("startsWith"),y=!l&&!v&&!!function(){var e=o(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!y&&!v},{startsWith:function(e){var t=s(c(this));u(e);var r=a(p(arguments.length>1?arguments[1]:void 0,t.length)),n=s(e);return d?d(t,n,r):h(t,r,r+n.length)===n}})},3280:function(e,t,r){"use strict";var n=r("ebb5"),i=r("2ba4"),o=r("e58c"),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("lastIndexOf",(function(e){var t=arguments.length;return i(o,a(this),t>1?[e,arguments[1]]:[e])}))},3410:function(e,t,r){var n=r("23e7"),i=r("d039"),o=r("7b0b"),a=r("e163"),s=r("e177"),u=i((function(){a(1)}));n({target:"Object",stat:!0,forced:u,sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},"39d8":function(e,t,r){"use strict";r("02c0")},"3a7b":function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").findIndex,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(e,t,r){"use strict";var n=r("da84"),i=r("ebb5"),o=r("07fa"),a=r("182d"),s=r("7b0b"),u=r("d039"),c=n.RangeError,f=i.aTypedArray,l=i.exportTypedArrayMethod,d=u((function(){new Int8Array(1).set({})}));l("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=s(e),i=o(n),u=0;if(i+t>r)throw c("Wrong length");while(u<i)this[t+u]=n[u++]}),d)},"3fcc":function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").map,o=r("b6b7"),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},"408a":function(e,t,r){var n=r("e330");e.exports=n(1..valueOf)},"428f":function(e,t,r){var n=r("da84");e.exports=n},"44e7":function(e,t,r){var n=r("861d"),i=r("c6b6"),o=r("b622"),a=o("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},"4a9b":function(e,t,r){var n=r("74e8");n("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"4dae":function(e,t,r){var n=r("da84"),i=r("23cb"),o=r("07fa"),a=r("8418"),s=n.Array,u=Math.max;e.exports=function(e,t,r){for(var n=o(e),c=i(t,n),f=i(void 0===r?n:r,n),l=s(u(f-c,0)),d=0;c<f;c++,d++)a(l,d,e[c]);return l.length=d,l}},"4df4":function(e,t,r){"use strict";var n=r("da84"),i=r("0366"),o=r("c65b"),a=r("7b0b"),s=r("9bdd"),u=r("e95a"),c=r("68ee"),f=r("07fa"),l=r("8418"),d=r("9a1f"),h=r("35a1"),p=n.Array;e.exports=function(e){var t=a(e),r=c(this),n=arguments.length,v=n>1?arguments[1]:void 0,y=void 0!==v;y&&(v=i(v,n>2?arguments[2]:void 0));var g,m,b,w,E,_,A=h(t),S=0;if(!A||this==p&&u(A))for(g=f(t),m=r?new this(g):p(g);g>S;S++)_=y?v(t[S],S):t[S],l(m,S,_);else for(w=d(t,A),E=w.next,m=r?new this:[];!(b=o(E,w)).done;S++)_=y?s(w,v,[b.value,S],!0):b.value,l(m,S,_);return m.length=S,m}},"4e82":function(e,t,r){"use strict";var n=r("23e7"),i=r("e330"),o=r("59ed"),a=r("7b0b"),s=r("07fa"),u=r("577e"),c=r("d039"),f=r("addb"),l=r("a640"),d=r("04d1"),h=r("d998"),p=r("2d00"),v=r("512ce"),y=[],g=i(y.sort),m=i(y.push),b=c((function(){y.sort(void 0)})),w=c((function(){y.sort(null)})),E=l("sort"),_=!c((function(){if(p)return p<70;if(!(d&&d>3)){if(h)return!0;if(v)return v<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)y.push({k:t+n,v:r})}for(y.sort((function(e,t){return t.v-e.v})),n=0;n<y.length;n++)t=y[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),A=b||!w||!E||!_,S=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:u(t)>u(r)?1:-1}};n({target:"Array",proto:!0,forced:A},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(_)return void 0===e?g(t):g(t,e);var r,n,i=[],u=s(t);for(n=0;n<u;n++)n in t&&m(i,t[n]);f(i,S(e)),r=i.length,n=0;while(n<r)t[n]=i[n++];while(n<u)delete t[n++];return t}})},"512ce":function(e,t,r){var n=r("342f"),i=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5319:function(e,t,r){"use strict";var n=r("2ba4"),i=r("c65b"),o=r("e330"),a=r("d784"),s=r("d039"),u=r("825a"),c=r("1626"),f=r("5926"),l=r("50c4"),d=r("577e"),h=r("1d80"),p=r("8aa5"),v=r("dc4a"),y=r("0cb2"),g=r("14c3"),m=r("b622"),b=m("replace"),w=Math.max,E=Math.min,_=o([].concat),A=o([].push),S=o("".indexOf),T=o("".slice),x=function(e){return void 0===e?e:String(e)},R=function(){return"$0"==="a".replace(/./,"$0")}(),k=function(){return!!/./[b]&&""===/./[b]("a","$0")}(),O=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,r){var o=k?"$":"$0";return[function(e,r){var n=h(this),o=void 0==e?void 0:v(e,b);return o?i(o,e,n,r):i(t,d(n),e,r)},function(e,i){var a=u(this),s=d(e);if("string"==typeof i&&-1===S(i,o)&&-1===S(i,"$<")){var h=r(t,a,s,i);if(h.done)return h.value}var v=c(i);v||(i=d(i));var m=a.global;if(m){var b=a.unicode;a.lastIndex=0}var R=[];while(1){var k=g(a,s);if(null===k)break;if(A(R,k),!m)break;var O=d(k[0]);""===O&&(a.lastIndex=p(s,l(a.lastIndex),b))}for(var P="",I=0,L=0;L<R.length;L++){k=R[L];for(var D=d(k[0]),C=w(E(f(k.index),s.length),0),F=[],M=1;M<k.length;M++)A(F,x(k[M]));var N=k.groups;if(v){var U=_([D],F,C,s);void 0!==N&&A(U,N);var j=d(n(i,void 0,U))}else j=y(D,s,C,F,N,i);C>=I&&(P+=T(s,I,C)+j,I=C+D.length)}return P+T(s,I)}]}),!O||!R||k)},5377:function(e,t,r){var n=r("83ab"),i=r("9bf2"),o=r("ad6d"),a=r("d039"),s=RegExp.prototype,u=n&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(s,"flags").get.call({dotAll:!0,sticky:!0})}));u&&i.f(s,"flags",{configurable:!0,get:o})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("e330"),i=r("1d80"),o=r("577e"),a=r("5899"),s=n("".replace),u="["+a+"]",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,f,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5a34":function(e,t,r){var n=r("da84"),i=r("44e7"),o=n.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},"5cc6":function(e,t,r){var n=r("74e8");n("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"5f96":function(e,t,r){"use strict";var n=r("ebb5"),i=r("e330"),o=n.aTypedArray,a=n.exportTypedArrayMethod,s=i([].join);a("join",(function(e){return s(o(this),e)}))},"5fb2":function(e,t,r){"use strict";var n=r("da84"),i=r("e330"),o=2147483647,a=36,s=1,u=26,c=38,f=700,l=72,d=128,h="-",p=/[^\0-\u007E]/,v=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",g=a-s,m=n.RangeError,b=i(v.exec),w=Math.floor,E=String.fromCharCode,_=i("".charCodeAt),A=i([].join),S=i([].push),T=i("".replace),x=i("".split),R=i("".toLowerCase),k=function(e){var t=[],r=0,n=e.length;while(r<n){var i=_(e,r++);if(i>=55296&&i<=56319&&r<n){var o=_(e,r++);56320==(64512&o)?S(t,((1023&i)<<10)+(1023&o)+65536):(S(t,i),r--)}else S(t,i)}return t},O=function(e){return e+22+75*(e<26)},P=function(e,t,r){var n=0;e=r?w(e/f):e>>1,e+=w(e/t);while(e>g*u>>1)e=w(e/g),n+=a;return w(n+(g+1)*e/(e+c))},I=function(e){var t=[];e=k(e);var r,n,i=e.length,c=d,f=0,p=l;for(r=0;r<e.length;r++)n=e[r],n<128&&S(t,E(n));var v=t.length,g=v;v&&S(t,h);while(g<i){var b=o;for(r=0;r<e.length;r++)n=e[r],n>=c&&n<b&&(b=n);var _=g+1;if(b-c>w((o-f)/_))throw m(y);for(f+=(b-c)*_,c=b,r=0;r<e.length;r++){if(n=e[r],n<c&&++f>o)throw m(y);if(n==c){var T=f,x=a;while(1){var R=x<=p?s:x>=p+u?u:x-p;if(T<R)break;var I=T-R,L=a-R;S(t,E(O(R+I%L))),T=w(I/L),x+=a}S(t,E(O(T))),p=P(f,_,g==v),f=0,g++}}f++,c++}return A(t,"")};e.exports=function(e){var t,r,n=[],i=x(T(R(e),v,"."),".");for(t=0;t<i.length;t++)r=i[t],S(n,b(p,r)?"xn--"+I(r):r);return A(n,".")}},"60bd":function(e,t,r){"use strict";var n=r("da84"),i=r("e330"),o=r("5e77").PROPER,a=r("ebb5"),s=r("e260"),u=r("b622"),c=u("iterator"),f=n.Uint8Array,l=i(s.values),d=i(s.keys),h=i(s.entries),p=a.aTypedArray,v=a.exportTypedArrayMethod,y=f&&f.prototype[c],g=!!y&&"values"===y.name,m=function(){return l(p(this))};v("entries",(function(){return h(p(this))})),v("keys",(function(){return d(p(this))})),v("values",m,o&&!g),v(c,m,o&&!g)},"621a":function(e,t,r){"use strict";var n=r("da84"),i=r("e330"),o=r("83ab"),a=r("a981"),s=r("5e77"),u=r("9112"),c=r("e2cc"),f=r("d039"),l=r("19aa"),d=r("5926"),h=r("50c4"),p=r("0b25"),v=r("77a7"),y=r("e163"),g=r("d2bb"),m=r("241c").f,b=r("9bf2").f,w=r("81d5"),E=r("4dae"),_=r("d44e"),A=r("69f3"),S=s.PROPER,T=s.CONFIGURABLE,x=A.get,R=A.set,k="ArrayBuffer",O="DataView",P="prototype",I="Wrong length",L="Wrong index",D=n[k],C=D,F=C&&C[P],M=n[O],N=M&&M[P],U=Object.prototype,j=n.Array,B=n.RangeError,G=i(w),H=i([].reverse),W=v.pack,z=v.unpack,V=function(e){return[255&e]},q=function(e){return[255&e,e>>8&255]},Y=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},$=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},K=function(e){return W(e,23,4)},J=function(e){return W(e,52,8)},X=function(e,t){b(e[P],t,{get:function(){return x(this)[t]}})},Z=function(e,t,r,n){var i=p(r),o=x(e);if(i+t>o.byteLength)throw B(L);var a=x(o.buffer).bytes,s=i+o.byteOffset,u=E(a,s,s+t);return n?u:H(u)},Q=function(e,t,r,n,i,o){var a=p(r),s=x(e);if(a+t>s.byteLength)throw B(L);for(var u=x(s.buffer).bytes,c=a+s.byteOffset,f=n(+i),l=0;l<t;l++)u[c+l]=f[o?l:t-l-1]};if(a){var ee=S&&D.name!==k;if(f((function(){D(1)}))&&f((function(){new D(-1)}))&&!f((function(){return new D,new D(1.5),new D(NaN),ee&&!T})))ee&&T&&u(D,"name",k);else{C=function(e){return l(this,F),new D(p(e))},C[P]=F;for(var te,re=m(D),ne=0;re.length>ne;)(te=re[ne++])in C||u(C,te,D[te]);F.constructor=C}g&&y(N)!==U&&g(N,U);var ie=new M(new C(2)),oe=i(N.setInt8);ie.setInt8(0,2147483648),ie.setInt8(1,2147483649),!ie.getInt8(0)&&ie.getInt8(1)||c(N,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else C=function(e){l(this,F);var t=p(e);R(this,{bytes:G(j(t),0),byteLength:t}),o||(this.byteLength=t)},F=C[P],M=function(e,t,r){l(this,N),l(e,F);var n=x(e).byteLength,i=d(t);if(i<0||i>n)throw B("Wrong offset");if(r=void 0===r?n-i:h(r),i+r>n)throw B(I);R(this,{buffer:e,byteLength:r,byteOffset:i}),o||(this.buffer=e,this.byteLength=r,this.byteOffset=i)},N=M[P],o&&(X(C,"byteLength"),X(M,"buffer"),X(M,"byteLength"),X(M,"byteOffset")),c(N,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return $(Z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return $(Z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return z(Z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return z(Z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Q(this,1,e,V,t)},setUint8:function(e,t){Q(this,1,e,V,t)},setInt16:function(e,t){Q(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Q(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Q(this,4,e,Y,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Q(this,4,e,Y,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Q(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Q(this,8,e,J,t,arguments.length>2?arguments[2]:void 0)}});_(C,k),_(M,O),e.exports={ArrayBuffer:C,DataView:M}},"649e":function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").some,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"65f0":function(e,t,r){var n=r("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},7037:function(e,t,r){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),n(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},7039:function(e,t,r){var n=r("23e7"),i=r("d039"),o=r("057f").f,a=i((function(){return!Object.getOwnPropertyNames(1)}));n({target:"Object",stat:!0,forced:a},{getOwnPropertyNames:o})},7156:function(e,t,r){var n=r("1626"),i=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var a,s;return o&&n(a=t.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(e,s),e}},"72f7":function(e,t,r){"use strict";var n=r("ebb5").exportTypedArrayMethod,i=r("d039"),o=r("da84"),a=r("e330"),s=o.Uint8Array,u=s&&s.prototype||{},c=[].toString,f=a([].join);i((function(){c.call({})}))&&(c=function(){return f(this)});var l=u.toString!=c;n("toString",c,l)},"735e":function(e,t,r){"use strict";var n=r("ebb5"),i=r("c65b"),o=r("81d5"),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("fill",(function(e){var t=arguments.length;return i(o,a(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},"746f":function(e,t,r){var n=r("428f"),i=r("1a2d"),o=r("e538"),a=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},"74e8":function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("c65b"),a=r("83ab"),s=r("8aa7"),u=r("ebb5"),c=r("621a"),f=r("19aa"),l=r("5c6c"),d=r("9112"),h=r("eac5"),p=r("50c4"),v=r("0b25"),y=r("182d"),g=r("a04b"),m=r("1a2d"),b=r("f5df"),w=r("861d"),E=r("d9b5"),_=r("7c73"),A=r("3a9b"),S=r("d2bb"),T=r("241c").f,x=r("a078"),R=r("b727").forEach,k=r("2626"),O=r("9bf2"),P=r("06cf"),I=r("69f3"),L=r("7156"),D=I.get,C=I.set,F=O.f,M=P.f,N=Math.round,U=i.RangeError,j=c.ArrayBuffer,B=j.prototype,G=c.DataView,H=u.NATIVE_ARRAY_BUFFER_VIEWS,W=u.TYPED_ARRAY_CONSTRUCTOR,z=u.TYPED_ARRAY_TAG,V=u.TypedArray,q=u.TypedArrayPrototype,Y=u.aTypedArrayConstructor,$=u.isTypedArray,K="BYTES_PER_ELEMENT",J="Wrong length",X=function(e,t){Y(e);var r=0,n=t.length,i=new e(n);while(n>r)i[r]=t[r++];return i},Z=function(e,t){F(e,t,{get:function(){return D(this)[t]}})},Q=function(e){var t;return A(B,e)||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},ee=function(e,t){return $(e)&&!E(t)&&t in e&&h(+t)&&t>=0},te=function(e,t){return t=g(t),ee(e,t)?l(2,e[t]):M(e,t)},re=function(e,t,r){return t=g(t),!(ee(e,t)&&w(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?F(e,t,r):(e[t]=r.value,e)};a?(H||(P.f=te,O.f=re,Z(q,"buffer"),Z(q,"byteOffset"),Z(q,"byteLength"),Z(q,"length")),n({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:te,defineProperty:re}),e.exports=function(e,t,r){var a=e.match(/\d+$/)[0]/8,u=e+(r?"Clamped":"")+"Array",c="get"+e,l="set"+e,h=i[u],g=h,m=g&&g.prototype,b={},E=function(e,t){var r=D(e);return r.view[c](t*a+r.byteOffset,!0)},A=function(e,t,n){var i=D(e);r&&(n=(n=N(n))<0?0:n>255?255:255&n),i.view[l](t*a+i.byteOffset,n,!0)},O=function(e,t){F(e,t,{get:function(){return E(this,t)},set:function(e){return A(this,t,e)},enumerable:!0})};H?s&&(g=t((function(e,t,r,n){return f(e,m),L(function(){return w(t)?Q(t)?void 0!==n?new h(t,y(r,a),n):void 0!==r?new h(t,y(r,a)):new h(t):$(t)?X(g,t):o(x,g,t):new h(v(t))}(),e,g)})),S&&S(g,V),R(T(h),(function(e){e in g||d(g,e,h[e])})),g.prototype=m):(g=t((function(e,t,r,n){f(e,m);var i,s,u,c=0,l=0;if(w(t)){if(!Q(t))return $(t)?X(g,t):o(x,g,t);i=t,l=y(r,a);var d=t.byteLength;if(void 0===n){if(d%a)throw U(J);if(s=d-l,s<0)throw U(J)}else if(s=p(n)*a,s+l>d)throw U(J);u=s/a}else u=v(t),s=u*a,i=new j(s);C(e,{buffer:i,byteOffset:l,byteLength:s,length:u,view:new G(i)});while(c<u)O(e,c++)})),S&&S(g,V),m=g.prototype=_(q)),m.constructor!==g&&d(m,"constructor",g),d(m,W,g),z&&d(m,z,u),b[u]=g,n({global:!0,forced:g!=h,sham:!H},b),K in g||d(g,K,a),K in m||d(m,K,a),k(u)}):e.exports=function(){}},"77a7":function(e,t,r){var n=r("da84"),i=n.Array,o=Math.abs,a=Math.pow,s=Math.floor,u=Math.log,c=Math.LN2,f=function(e,t,r){var n,f,l,d=i(r),h=8*r-t-1,p=(1<<h)-1,v=p>>1,y=23===t?a(2,-24)-a(2,-77):0,g=e<0||0===e&&1/e<0?1:0,m=0;e=o(e),e!=e||e===1/0?(f=e!=e?1:0,n=p):(n=s(u(e)/c),l=a(2,-n),e*l<1&&(n--,l*=2),e+=n+v>=1?y/l:y*a(2,1-v),e*l>=2&&(n++,l/=2),n+v>=p?(f=0,n=p):n+v>=1?(f=(e*l-1)*a(2,t),n+=v):(f=e*a(2,v-1)*a(2,t),n=0));while(t>=8)d[m++]=255&f,f/=256,t-=8;n=n<<t|f,h+=t;while(h>0)d[m++]=255&n,n/=256,h-=8;return d[--m]|=128*g,d},l=function(e,t){var r,n=e.length,i=8*n-t-1,o=(1<<i)-1,s=o>>1,u=i-7,c=n-1,f=e[c--],l=127&f;f>>=7;while(u>0)l=256*l+e[c--],u-=8;r=l&(1<<-u)-1,l>>=-u,u+=t;while(u>0)r=256*r+e[c--],u-=8;if(0===l)l=1-s;else{if(l===o)return r?NaN:f?-1/0:1/0;r+=a(2,t),l-=s}return(f?-1:1)*r*a(2,l-t)};e.exports={pack:f,unpack:l}},"81d5":function(e,t,r){"use strict";var n=r("7b0b"),i=r("23cb"),o=r("07fa");e.exports=function(e){var t=n(this),r=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);while(c>s)t[s++]=e;return t}},"82f8":function(e,t,r){"use strict";var n=r("ebb5"),i=r("4d64").includes,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},8418:function(e,t,r){"use strict";var n=r("a04b"),i=r("9bf2"),o=r("5c6c");e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},"84c3":function(e,t,r){var n=r("74e8");n("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"8a59":function(e,t,r){var n=r("74e8");n("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},"8aa5":function(e,t,r){"use strict";var n=r("6547").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"8aa7":function(e,t,r){var n=r("da84"),i=r("d039"),o=r("1c7e"),a=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,u=n.Int8Array;e.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},"8b09":function(e,t,r){var n=r("74e8");n("Int16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"907a":function(e,t,r){"use strict";var n=r("ebb5"),i=r("07fa"),o=r("5926"),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("at",(function(e){var t=a(this),r=i(t),n=o(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}))},9129:function(e,t,r){var n=r("23e7");n({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},9263:function(e,t,r){"use strict";var n=r("c65b"),i=r("e330"),o=r("577e"),a=r("ad6d"),s=r("9f7f"),u=r("5692"),c=r("7c73"),f=r("69f3").get,l=r("fce3"),d=r("107c"),h=u("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,y=i("".charAt),g=i("".indexOf),m=i("".replace),b=i("".slice),w=function(){var e=/a/,t=/b*/g;return n(p,e,"a"),n(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),E=s.BROKEN_CARET,_=void 0!==/()??/.exec("")[1],A=w||_||E||l||d;A&&(v=function(e){var t,r,i,s,u,l,d,A=this,S=f(A),T=o(e),x=S.raw;if(x)return x.lastIndex=A.lastIndex,t=n(v,x,T),A.lastIndex=x.lastIndex,t;var R=S.groups,k=E&&A.sticky,O=n(a,A),P=A.source,I=0,L=T;if(k&&(O=m(O,"y",""),-1===g(O,"g")&&(O+="g"),L=b(T,A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&"\n"!==y(T,A.lastIndex-1))&&(P="(?: "+P+")",L=" "+L,I++),r=new RegExp("^(?:"+P+")",O)),_&&(r=new RegExp("^"+P+"$(?!\\s)",O)),w&&(i=A.lastIndex),s=n(p,k?r:A,L),k?s?(s.input=b(s.input,I),s[0]=b(s[0],I),s.index=A.lastIndex,A.lastIndex+=s[0].length):A.lastIndex=0:w&&s&&(A.lastIndex=A.global?s.index+s[0].length:i),_&&s&&s.length>1&&n(h,s[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&R)for(s.groups=l=c(null),u=0;u<R.length;u++)d=R[u],l[d[0]]=s[d[1]];return s}),e.exports=v},"93bf":function(e,t,r){
/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/
(function(){"use strict";var t="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},r=e.exports,n=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=r.length,o={};n<i;n++)if(e=r[n],e&&e[1]in t){for(n=0;n<e.length;n++)o[r[0][n]]=e[n];return o}return!1}(),i={change:n.fullscreenchange,error:n.fullscreenerror},o={request:function(e,r){return new Promise(function(i,o){var a=function(){this.off("change",a),i()}.bind(this);this.on("change",a),e=e||t.documentElement;var s=e[n.requestFullscreen](r);s instanceof Promise&&s.then(a).catch(o)}.bind(this))},exit:function(){return new Promise(function(e,r){if(this.isFullscreen){var i=function(){this.off("change",i),e()}.bind(this);this.on("change",i);var o=t[n.exitFullscreen]();o instanceof Promise&&o.then(i).catch(r)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=i[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=i[e];n&&t.removeEventListener(n,r,!1)},raw:n};n?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),r?e.exports=o:window.screenfull=o):r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})()},"944a":function(e,t,r){var n=r("746f");n("toStringTag")},"96cf":function(e,t){!function(t){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"===typeof e,f=t.regeneratorRuntime;if(f)c&&(e.exports=f);else{f=t.regeneratorRuntime=c?e.exports:{},f.wrap=w;var l="suspendedStart",d="suspendedYield",h="executing",p="completed",v={},y={};y[a]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==n&&i.call(m,a)&&(y=m);var b=S.prototype=_.prototype=Object.create(y);A.prototype=b.constructor=S,S.constructor=A,S[u]=A.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},T(x.prototype),x.prototype[s]=function(){return this},f.AsyncIterator=x,f.async=function(e,t,r,n){var i=new x(w(e,t,r,n));return f.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},T(b),b[u]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=L,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function w(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),a=new I(n||[]);return o._invoke=R(e,r,a),o}function E(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function _(){}function A(){}function S(){}function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e){function t(r,n,o,a){var s=E(e[r],e,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){u.value=e,o(u)}),a)}a(s.arg)}var r;function n(e,n){function i(){return new Promise((function(r,i){t(e,n,r,i)}))}return r=r?r.then(i,i):i()}this._invoke=n}function R(e,t,r){var n=l;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return D()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=E(e,t,r);if("normal"===u.type){if(n=r.done?p:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}function k(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,k(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=E(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){while(++n<e.length)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:D}}function D(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},9861:function(e,t,r){"use strict";r("e260");var n=r("23e7"),i=r("da84"),o=r("d066"),a=r("c65b"),s=r("e330"),u=r("0d3b"),c=r("6eeb"),f=r("e2cc"),l=r("d44e"),d=r("9ed3"),h=r("69f3"),p=r("19aa"),v=r("1626"),y=r("1a2d"),g=r("0366"),m=r("f5df"),b=r("825a"),w=r("861d"),E=r("577e"),_=r("7c73"),A=r("5c6c"),S=r("9a1f"),T=r("35a1"),x=r("b622"),R=r("addb"),k=x("iterator"),O="URLSearchParams",P=O+"Iterator",I=h.set,L=h.getterFor(O),D=h.getterFor(P),C=o("fetch"),F=o("Request"),M=o("Headers"),N=F&&F.prototype,U=M&&M.prototype,j=i.RegExp,B=i.TypeError,G=i.decodeURIComponent,H=i.encodeURIComponent,W=s("".charAt),z=s([].join),V=s([].push),q=s("".replace),Y=s([].shift),$=s([].splice),K=s("".split),J=s("".slice),X=/\+/g,Z=Array(4),Q=function(e){return Z[e-1]||(Z[e-1]=j("((?:%[\\da-f]{2}){"+e+"})","gi"))},ee=function(e){try{return G(e)}catch(t){return e}},te=function(e){var t=q(e,X," "),r=4;try{return G(t)}catch(n){while(r)t=q(t,Q(r--),ee);return t}},re=/[!'()~]|%20/g,ne={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ie=function(e){return ne[e]},oe=function(e){return q(H(e),re,ie)},ae=function(e,t){if(e<t)throw B("Not enough arguments")},se=d((function(e,t){I(this,{type:P,iterator:S(L(e).entries),kind:t})}),"Iterator",(function(){var e=D(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(w(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===W(e,0)?J(e,1):e:E(e)))};ue.prototype={type:O,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,s,u,c=T(e);if(c){t=S(e,c),r=t.next;while(!(n=a(r,t)).done){if(i=S(b(n.value)),o=i.next,(s=a(o,i)).done||(u=a(o,i)).done||!a(o,i).done)throw B("Expected sequence with length 2");V(this.entries,{key:E(s.value),value:E(u.value)})}}else for(var f in e)y(e,f)&&V(this.entries,{key:f,value:E(e[f])})},parseQuery:function(e){if(e){var t,r,n=K(e,"&"),i=0;while(i<n.length)t=n[i++],t.length&&(r=K(t,"="),V(this.entries,{key:te(Y(r)),value:te(z(r,"="))}))}},serialize:function(){var e,t=this.entries,r=[],n=0;while(n<t.length)e=t[n++],V(r,oe(e.key)+"="+oe(e.value));return z(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ce=function(){p(this,fe);var e=arguments.length>0?arguments[0]:void 0;I(this,new ue(e))},fe=ce.prototype;if(f(fe,{append:function(e,t){ae(arguments.length,2);var r=L(this);V(r.entries,{key:E(e),value:E(t)}),r.updateURL()},delete:function(e){ae(arguments.length,1);var t=L(this),r=t.entries,n=E(e),i=0;while(i<r.length)r[i].key===n?$(r,i,1):i++;t.updateURL()},get:function(e){ae(arguments.length,1);for(var t=L(this).entries,r=E(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){ae(arguments.length,1);for(var t=L(this).entries,r=E(e),n=[],i=0;i<t.length;i++)t[i].key===r&&V(n,t[i].value);return n},has:function(e){ae(arguments.length,1);var t=L(this).entries,r=E(e),n=0;while(n<t.length)if(t[n++].key===r)return!0;return!1},set:function(e,t){ae(arguments.length,1);for(var r,n=L(this),i=n.entries,o=!1,a=E(e),s=E(t),u=0;u<i.length;u++)r=i[u],r.key===a&&(o?$(i,u--,1):(o=!0,r.value=s));o||V(i,{key:a,value:s}),n.updateURL()},sort:function(){var e=L(this);R(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,r=L(this).entries,n=g(e,arguments.length>1?arguments[1]:void 0),i=0;while(i<r.length)t=r[i++],n(t.value,t.key,this)},keys:function(){return new se(this,"keys")},values:function(){return new se(this,"values")},entries:function(){return new se(this,"entries")}},{enumerable:!0}),c(fe,k,fe.entries,{name:"entries"}),c(fe,"toString",(function(){return L(this).serialize()}),{enumerable:!0}),l(ce,O),n({global:!0,forced:!u},{URLSearchParams:ce}),!u&&v(M)){var le=s(U.has),de=s(U.set),he=function(e){if(w(e)){var t,r=e.body;if(m(r)===O)return t=e.headers?new M(e.headers):new M,le(t,"content-type")||de(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_(e,{body:A(0,E(r)),headers:A(0,t)})}return e};if(v(C)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(e,arguments.length>1?he(arguments[1]):{})}}),v(F)){var pe=function(e){return p(this,N),new F(e,arguments.length>1?he(arguments[1]):{})};N.constructor=pe,pe.prototype=N,n({global:!0,forced:!0},{Request:pe})}}e.exports={URLSearchParams:ce,getState:L}},"99af":function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("d039"),a=r("e8b5"),s=r("861d"),u=r("7b0b"),c=r("07fa"),f=r("8418"),l=r("65f0"),d=r("1dde"),h=r("b622"),p=r("2d00"),v=h("isConcatSpreadable"),y=9007199254740991,g="Maximum allowed index exceeded",m=i.TypeError,b=p>=51||!o((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),w=d("concat"),E=function(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:a(e)},_=!b||!w;n({target:"Array",proto:!0,forced:_},{concat:function(e){var t,r,n,i,o,a=u(this),s=l(a,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?a:arguments[t],E(o)){if(i=c(o),d+i>y)throw m(g);for(r=0;r<i;r++,d++)r in o&&f(s,d,o[r])}else{if(d>=y)throw m(g);f(s,d++,o)}return s.length=d,s}})},"9a8c":function(e,t,r){"use strict";var n=r("e330"),i=r("ebb5"),o=r("145e"),a=n(o),s=i.aTypedArray,u=i.exportTypedArrayMethod;u("copyWithin",(function(e,t){return a(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9bdd":function(e,t,r){var n=r("825a"),i=r("2a62");e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(a){i(e,"throw",a)}}},"9f7f":function(e,t,r){var n=r("d039"),i=r("da84"),o=i.RegExp,a=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=a||n((function(){return!o("a","y").sticky})),u=a||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:u,MISSED_STICKY:s,UNSUPPORTED_Y:a}},a078:function(e,t,r){var n=r("0366"),i=r("c65b"),o=r("5087"),a=r("7b0b"),s=r("07fa"),u=r("9a1f"),c=r("35a1"),f=r("e95a"),l=r("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,r,d,h,p,v,y=o(this),g=a(e),m=arguments.length,b=m>1?arguments[1]:void 0,w=void 0!==b,E=c(g);if(E&&!f(E)){p=u(g,E),v=p.next,g=[];while(!(h=i(v,p)).done)g.push(h.value)}for(w&&m>2&&(b=n(b,arguments[2])),r=s(g),d=new(l(y))(r),t=0;r>t;t++)d[t]=w?b(g[t],t):g[t];return d}},a15b:function(e,t,r){"use strict";var n=r("23e7"),i=r("e330"),o=r("44ad"),a=r("fc6a"),s=r("a640"),u=i([].join),c=o!=Object,f=s("join",",");n({target:"Array",proto:!0,forced:c||!f},{join:function(e){return u(a(this),void 0===e?",":e)}})},a434:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("23cb"),a=r("5926"),s=r("07fa"),u=r("7b0b"),c=r("65f0"),f=r("8418"),l=r("1dde"),d=l("splice"),h=i.TypeError,p=Math.max,v=Math.min,y=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var r,n,i,l,d,m,b=u(this),w=s(b),E=o(e,w),_=arguments.length;if(0===_?r=n=0:1===_?(r=0,n=w-E):(r=_-2,n=v(p(a(t),0),w-E)),w+r-n>y)throw h(g);for(i=c(b,n),l=0;l<n;l++)d=E+l,d in b&&f(i,l,b[d]);if(i.length=n,r<n){for(l=E;l<w-n;l++)d=l+n,m=l+r,d in b?b[m]=b[d]:delete b[m];for(l=w;l>w-n+r;l--)delete b[l-1]}else if(r>n)for(l=w-n;l>E;l--)d=l+n-1,m=l+r-1,d in b?b[m]=b[d]:delete b[m];for(l=0;l<r;l++)b[l+E]=arguments[l+2];return b.length=w-n+r,i}})},a4d3:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("d066"),a=r("2ba4"),s=r("c65b"),u=r("e330"),c=r("c430"),f=r("83ab"),l=r("4930"),d=r("d039"),h=r("1a2d"),p=r("e8b5"),v=r("1626"),y=r("861d"),g=r("3a9b"),m=r("d9b5"),b=r("825a"),w=r("7b0b"),E=r("fc6a"),_=r("a04b"),A=r("577e"),S=r("5c6c"),T=r("7c73"),x=r("df75"),R=r("241c"),k=r("057f"),O=r("7418"),P=r("06cf"),I=r("9bf2"),L=r("d1e7"),D=r("f36a"),C=r("6eeb"),F=r("5692"),M=r("f772"),N=r("d012"),U=r("90e3"),j=r("b622"),B=r("e538"),G=r("746f"),H=r("d44e"),W=r("69f3"),z=r("b727").forEach,V=M("hidden"),q="Symbol",Y="prototype",$=j("toPrimitive"),K=W.set,J=W.getterFor(q),X=Object[Y],Z=i.Symbol,Q=Z&&Z[Y],ee=i.TypeError,te=i.QObject,re=o("JSON","stringify"),ne=P.f,ie=I.f,oe=k.f,ae=L.f,se=u([].push),ue=F("symbols"),ce=F("op-symbols"),fe=F("string-to-symbol-registry"),le=F("symbol-to-string-registry"),de=F("wks"),he=!te||!te[Y]||!te[Y].findChild,pe=f&&d((function(){return 7!=T(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=ne(X,t);n&&delete X[t],ie(e,t,r),n&&e!==X&&ie(X,t,n)}:ie,ve=function(e,t){var r=ue[e]=T(Q);return K(r,{type:q,tag:e,description:t}),f||(r.description=t),r},ye=function(e,t,r){e===X&&ye(ce,t,r),b(e);var n=_(t);return b(r),h(ue,n)?(r.enumerable?(h(e,V)&&e[V][n]&&(e[V][n]=!1),r=T(r,{enumerable:S(0,!1)})):(h(e,V)||ie(e,V,S(1,{})),e[V][n]=!0),pe(e,n,r)):ie(e,n,r)},ge=function(e,t){b(e);var r=E(t),n=x(r).concat(_e(r));return z(n,(function(t){f&&!s(be,r,t)||ye(e,t,r[t])})),e},me=function(e,t){return void 0===t?T(e):ge(T(e),t)},be=function(e){var t=_(e),r=s(ae,this,t);return!(this===X&&h(ue,t)&&!h(ce,t))&&(!(r||!h(this,t)||!h(ue,t)||h(this,V)&&this[V][t])||r)},we=function(e,t){var r=E(e),n=_(t);if(r!==X||!h(ue,n)||h(ce,n)){var i=ne(r,n);return!i||!h(ue,n)||h(r,V)&&r[V][n]||(i.enumerable=!0),i}},Ee=function(e){var t=oe(E(e)),r=[];return z(t,(function(e){h(ue,e)||h(N,e)||se(r,e)})),r},_e=function(e){var t=e===X,r=oe(t?ce:E(e)),n=[];return z(r,(function(e){!h(ue,e)||t&&!h(X,e)||se(n,ue[e])})),n};if(l||(Z=function(){if(g(Q,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?A(arguments[0]):void 0,t=U(e),r=function(e){this===X&&s(r,ce,e),h(this,V)&&h(this[V],t)&&(this[V][t]=!1),pe(this,t,S(1,e))};return f&&he&&pe(X,t,{configurable:!0,set:r}),ve(t,e)},Q=Z[Y],C(Q,"toString",(function(){return J(this).tag})),C(Z,"withoutSetter",(function(e){return ve(U(e),e)})),L.f=be,I.f=ye,P.f=we,R.f=k.f=Ee,O.f=_e,B.f=function(e){return ve(j(e),e)},f&&(ie(Q,"description",{configurable:!0,get:function(){return J(this).description}}),c||C(X,"propertyIsEnumerable",be,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:Z}),z(x(de),(function(e){G(e)})),n({target:q,stat:!0,forced:!l},{for:function(e){var t=A(e);if(h(fe,t))return fe[t];var r=Z(t);return fe[t]=r,le[r]=t,r},keyFor:function(e){if(!m(e))throw ee(e+" is not a symbol");if(h(le,e))return le[e]},useSetter:function(){he=!0},useSimple:function(){he=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!f},{create:me,defineProperty:ye,defineProperties:ge,getOwnPropertyDescriptor:we}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:Ee,getOwnPropertySymbols:_e}),n({target:"Object",stat:!0,forced:d((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(w(e))}}),re){var Ae=!l||d((function(){var e=Z();return"[null]"!=re([e])||"{}"!=re({a:e})||"{}"!=re(Object(e))}));n({target:"JSON",stat:!0,forced:Ae},{stringify:function(e,t,r){var n=D(arguments),i=t;if((y(t)||void 0!==e)&&!m(e))return p(t)||(t=function(e,t){if(v(i)&&(t=s(i,this,e,t)),!m(t))return t}),n[1]=t,a(re,null,n)}})}if(!Q[$]){var Se=Q.valueOf;C(Q,$,(function(e){return s(Se,this)}))}H(Z,q),N[V]=!0},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},a6fd:function(e,t,r){var n=r("23e7"),i=r("2ba4"),o=r("59ed"),a=r("825a"),s=r("d039"),u=!s((function(){Reflect.apply((function(){}))}));n({target:"Reflect",stat:!0,forced:u},{apply:function(e,t,r){return i(o(e),t,a(r))}})},a874:function(e,t,r){var n=r("23e7"),i=r("145e"),o=r("44d2");n({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},a975:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").every,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},a9e3:function(e,t,r){"use strict";var n=r("83ab"),i=r("da84"),o=r("e330"),a=r("94ca"),s=r("6eeb"),u=r("1a2d"),c=r("7156"),f=r("3a9b"),l=r("d9b5"),d=r("c04e"),h=r("d039"),p=r("241c").f,v=r("06cf").f,y=r("9bf2").f,g=r("408a"),m=r("58a8").trim,b="Number",w=i[b],E=w.prototype,_=i.TypeError,A=o("".slice),S=o("".charCodeAt),T=function(e){var t=d(e,"number");return"bigint"==typeof t?t:x(t)},x=function(e){var t,r,n,i,o,a,s,u,c=d(e,"number");if(l(c))throw _("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=m(c),t=S(c,0),43===t||45===t){if(r=S(c,2),88===r||120===r)return NaN}else if(48===t){switch(S(c,1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(o=A(c,2),a=o.length,s=0;s<a;s++)if(u=S(o,s),u<48||u>i)return NaN;return parseInt(o,n)}return+c};if(a(b,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var R,k=function(e){var t=arguments.length<1?0:w(T(e)),r=this;return f(E,r)&&h((function(){g(r)}))?c(Object(t),r,k):t},O=n?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),P=0;O.length>P;P++)u(w,R=O[P])&&!u(k,R)&&y(k,R,v(w,R));k.prototype=E,E.constructor=k,s(i,b,k)}},ab13:function(e,t,r){var n=r("b622"),i=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[i]=!1,"/./"[e](t)}catch(n){}}return!1}},ac1f:function(e,t,r){"use strict";var n=r("23e7"),i=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t,r){var n=r("4dae"),i=Math.floor,o=function(e,t){var r=e.length,u=i(r/2);return r<8?a(e,t):s(e,o(n(e,0,u),t),o(n(e,u),t),t)},a=function(e,t){var r,n,i=e.length,o=1;while(o<i){n=o,r=e[o];while(n&&t(e[n-1],r)>0)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},s=function(e,t,r,n){var i=t.length,o=r.length,a=0,s=0;while(a<i||s<o)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e};e.exports=o},b0c0:function(e,t,r){var n=r("83ab"),i=r("5e77").EXISTS,o=r("e330"),a=r("9bf2").f,s=Function.prototype,u=o(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=o(c.exec),l="name";n&&!i&&a(s,l,{configurable:!0,get:function(){try{return f(c,u(this))[1]}catch(e){return""}}})},b39a:function(e,t,r){"use strict";var n=r("da84"),i=r("2ba4"),o=r("ebb5"),a=r("d039"),s=r("f36a"),u=n.Int8Array,c=o.aTypedArray,f=o.exportTypedArrayMethod,l=[].toLocaleString,d=!!u&&a((function(){l.call(new u(1))})),h=a((function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()}))||!a((function(){u.prototype.toLocaleString.call([1,2])}));f("toLocaleString",(function(){return i(l,d?s(c(this)):c(this),s(arguments))}),h)},b636:function(e,t,r){var n=r("746f");n("asyncIterator")},b64b:function(e,t,r){var n=r("23e7"),i=r("7b0b"),o=r("df75"),a=r("d039"),s=a((function(){o(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return o(i(e))}})},b6b7:function(e,t,r){var n=r("ebb5"),i=r("4840"),o=n.TYPED_ARRAY_CONSTRUCTOR,a=n.aTypedArrayConstructor;e.exports=function(e){return a(i(e,e[o]))}},b727:function(e,t,r){var n=r("0366"),i=r("e330"),o=r("44ad"),a=r("7b0b"),s=r("07fa"),u=r("65f0"),c=i([].push),f=function(e){var t=1==e,r=2==e,i=3==e,f=4==e,l=6==e,d=7==e,h=5==e||l;return function(p,v,y,g){for(var m,b,w=a(p),E=o(w),_=n(v,y),A=s(E),S=0,T=g||u,x=t?T(p,A):r||d?T(p,0):void 0;A>S;S++)if((h||S in E)&&(m=E[S],b=_(m,S,w),e))if(t)x[S]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return S;case 2:c(x,m)}else switch(e){case 4:return!1;case 7:c(x,m)}return l?-1:i||f?f:x}};e.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},c19f:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("621a"),a=r("2626"),s="ArrayBuffer",u=o[s],c=i[s];n({global:!0,forced:c!==u},{ArrayBuffer:u}),a(s)},c1ac:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").filter,o=r("1448"),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("filter",(function(e){var t=i(a(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},ca91:function(e,t,r){"use strict";var n=r("ebb5"),i=r("d58f").left,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},caad:function(e,t,r){"use strict";var n=r("23e7"),i=r("4d64").includes,o=r("44d2");n({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cd26:function(e,t,r){"use strict";var n=r("ebb5"),i=n.aTypedArray,o=n.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){var e,t=this,r=i(t).length,n=a(r/2),o=0;while(o<n)e=t[o],t[o++]=t[--r],t[r]=e;return t}))},cfc3:function(e,t,r){var n=r("74e8");n("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},d022:function(e,t,r){var n,i,o,a,s=r("7037").default;r("d3b7"),r("f8c9"),r("a6fd"),r("1bf2"),r("a4d3"),r("99af"),r("7039"),r("9129"),r("a9e3"),r("3410"),r("b0c0"),r("b64b"),r("fb6a"),r("e01a"),r("d28b"),r("3ca3"),r("ddb0"),r("b636"),r("944a"),r("0c47"),r("23dc"),r("159b"),r("4ae1"),r("2b3d"),r("9861"),r("25f0"),r("5cc6"),r("907a"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("ac1f"),r("5319"),r("e9c4"),r("5377"),r("4e82"),r("a434"),r("fd87"),r("8b09"),r("143c"),r("84c3"),r("fb2c"),r("cfc3"),r("4a9b"),r("2ca0"),r("caad"),r("2532"),r("a15b"),r("d81d"),r("c19f"),r("8a59"),r("a874"),function(r){"object"===s(t)&&"undefined"!==typeof e?e.exports=r():(i=[],n=r,o="function"===typeof n?n.apply(t,i):n,void 0===o||(e.exports=o))}((function(){return function(){function e(t,r,n){function i(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof a&&a;if(!u&&c)return a(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){var r=t[s][1][e];return i(r||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof a&&a,s=0;s<n.length;s++)i(n[s]);return i}return e}()({1:[function(e,t,r){"use strict";var n,i="object"===("undefined"===typeof Reflect?"undefined":s(Reflect))?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function a(e){console&&console.warn&&console.warn(e)}n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var u=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}t.exports=c,t.exports.once=E,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var f=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+s(e))}function d(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,s;if(l(r),o=e._events,void 0===o?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"===typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=d(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a(u)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function y(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?w(i):m(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function b(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function w(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function E(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}A(e,t,o,{once:!0}),"error"!==t&&_(e,i,{once:!0})}))}function _(e,t,r){"function"===typeof e.on&&A(e,"error",t,r)}function A(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+s(e));e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!==typeof e||e<0||u(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||u(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var c=u.length,f=m(u,c);for(r=0;r<c;++r)o(f[r],this,t)}return!0},c.prototype.addListener=function(e,t){return h(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return h(this,e,t,!0)},c.prototype.once=function(e,t){return l(t),this.on(e,v(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,v(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,n,i,o,a;if(l(t),n=this._events,void 0===n)return this;if(r=n[e],void 0===r)return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():b(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)i=o[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},c.prototype.listeners=function(e){return y(this,e,!0)},c.prototype.rawListeners=function(e){return y(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},{}],2:[function(e,t,r){var n,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function c(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(e){i=s}})();var f,l=[],d=!1,h=-1;function p(){d&&f&&(d=!1,f.length?l=f.concat(l):h=-1,l.length&&v())}function v(){if(!d){var e=u(p);d=!0;var t=l.length;while(t){f=l,l=[];while(++h<t)f&&f[h].run();h=-1,t=l.length}f=null,d=!1,c(e)}}function y(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new y(e,t)),1!==l.length||d||u(v)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("../errors"),o=u(e("../events")),a=u(e("../event-handler")),s=u(e("../utils/mp4-encoder"));function u(e){return e&&e.__esModule?e:{default:e}}function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(t){u=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new T(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return R()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function i(o,a,s,u){var c=l(e[o],e,a);if("throw"!==c.type){var f=c.arg,d=f.value;return d&&"object"==n(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(d).then((function(e){f.value=e,s(f)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var o;this._invoke=function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}}function _(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(E.prototype),u(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new E(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e){var t=m();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)}))}}var _=null;function A(){return S.apply(this,arguments)}function S(){return S=E(c().mark((function e(){return c().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)().then((function(e){_=e}));case 2:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}var T=function(e){h(r,e);var t=v(r);function r(e){var n;return f(this,r),n=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.BUFFER_APPENDING,o.default.BUFFER_RESET,o.default.RECORDING_START,o.default.RECORDING_STOP,o.default.H264_DATA_APPENDING,o.default.PLAYER_SEEK_NOW),n.rec_threshold_total=17179869184,n.rec_threshold_single=1073741824,n.rec_timer=void 0,n.rec_file="",n.rec_result_cb=void 0,n.rec_state_cb=void 0,n.mediaElement=null,n.mediaSource=null,n.mediaSize=0,n.sourceBuffers={},n.segments=[],n.h264Frames=[],n.appended=0,n.mediaErrorCount=0,n.count=0,n.recording=!1,n.onsbue=n.onSBUpdateEnd.bind(g(n)),n.browserType=0,-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&(n.browserType=1),n.mediaType="",n.websocketName=void 0,n.channelName=void 0,n._fs=null,n.track_info={width:0,height:0},A(),n.mp4BlobBuffer=[],n}return d(r,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"pad2",value:function(e){return e<10?"0"+e:e}},{key:"onRecordingProc",value:function(){var e=this;if(null==e._fs)return e.rec_result_cb&&e.rec_result_cb(!1),void console.log("fs is not authorized");e.rec_timer&&(clearInterval(e.rec_timer),e.rec_timer=void 0),e.count=0,e.rec_timer=setInterval((function(){if(""==e.mediaType||"H264Raw"==e.mediaType&&e.appended>10){clearInterval(e.rec_timer),e.rec_timer=void 0;var t=new Date,r=1900+t.getYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())+"_"+e.pad2(t.getHours())+"-"+e.pad2(t.getMinutes())+"-"+e.pad2(t.getSeconds());e.rec_file="ax_"+r+".mp4",console.log("MediaRecorder started: "+e.rec_file),e.mediaSize=0,e.recording=!0,e.rec_result_cb&&e.rec_result_cb(!0)}else e.count++;e.count>=10&&(clearInterval(e.rec_timer),e.rec_timer=void 0,e.rec_result_cb&&e.rec_result_cb(!1))}),1e3)}},{key:"onRecordingStart",value:function(e){if(this.recording)console.log("recording is in progress");else{void 0!=e&&(this.rec_threshold_single=e.rec_file_threshold,this.rec_result_cb=e.result_cb,this.rec_state_cb=e.state_cb);var t=this;navigator.webkitPersistentStorage.queryUsageAndQuota((function(e,r){""==r?t.requestFs():window.webkitRequestFileSystem(window.PERSISTENT,t.rec_threshold_total,(function(e){t._fs=e,e.root.getDirectory("ax_video",{create:!0},(function(e){console.log("Directory: "+e.name+" fs requested"),t.onRecordingProc()}),t.errorHandler)}))}),this.errorHandler)}}},{key:"onRecordingStop",value:function(){this.rec_timer&&(clearInterval(this.rec_timer),this.rec_timer=void 0,console.log("Media Recorder stopped2"));var e=this;e.recording=!1,e.saveToMP4Blob(e.h264Frames,this.track_info),e.h264Frames=[]}},{key:"errorHandler",value:function(e){var t="An error occured(errcd): ";console.log(t+e.code)}},{key:"requestFs",value:function(){var e=this;navigator.webkitPersistentStorage.requestQuota(this.rec_threshold_total,(function(t){console.log("grantedBytes: "+t),t>0?window.webkitRequestFileSystem(window.PERSISTENT,t,(function(t){e._fs=t,t.root.getDirectory("ax_video",{create:!0},(function(t){console.log("Directory: "+t.name+" exists or just created."),e.onRecordingProc()}),e.errorHandler)})):e.rec_result_cb&&e.rec_result_cb(!1)}))}},{key:"onMediaAttaching",value:function(e){var t=this.mediaElement=e.media;if(this.mediaType=e.mediaType,this.websocketName=e.websocketName,this.channelName=e.channelName,t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){}},{key:"onH264DataAppending",value:function(e){if(this.recording&&e.data){var t=this,r=e.data;t.h264Frames.push(e.data),t.mediaSize+=r.length,t.mediaSize>=t.rec_threshold_single&&(t.rec_state_cb&&t.rec_state_cb(!1),t.onRecordingStop(),t.onRecordingStart(),t.rec_state_cb&&t.rec_state_cb(!0))}}},{key:"saveToMP4Blob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,n=!1;if(e.length>0){var i=t.width,o=t.height,a=_.createEncoder({width:i,height:o,hevc:n});e.forEach((function(e){a.addNalu(e)}));var s=new Blob([a.end()]);r.writeMP4Data(s)}}},{key:"writeMP4Data",value:function(e){var t=this;t._fs.root.getFile("ax_video/"+t.rec_file,{create:!0},(function(r){r.createWriter((function(t){t.onwriteend=function(e){},t.onerror=function(e){console.log("Write rec data failed: "+e.toString())},t.seek(t.length),t.write(e)}),t.errorHandler)}),t.errorHandler)}},{key:"onBufferAppending",value:function(e){this.segments.push(e),this.doAppending()}},{key:"onMediaSourceClose",value:function(){console.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){console.log("media source ended")}},{key:"onSBUpdateEnd",value:function(e){1===this.browserType&&(this.mediaSource.endOfStream(),this.media.play()),this.appending=!1,this.doAppending()}},{key:"onMediaSourceOpen",value:function(){console.log("media source open");var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.wfs.trigger(o.default.MEDIA_ATTACHED,{media:this.media,channelName:this.channelName,mediaType:this.mediaType,websocketName:this.websocketName})}},{key:"onBufferReset",value:function(e){"H264Raw"===this.mediaType&&this.createSourceBuffers({tracks:"video",mimeType:e.mimeType}),this.track_info.width=e.width,this.track_info.height=e.height}},{key:"createSourceBuffers",value:function(t){var r,n=this.sourceBuffers,i=this.mediaSource;r=""===t.mimeType?"video/mp4;codecs=avc1.420028":"video/mp4;codecs="+t.mimeType;try{var a=n["video"]=i.addSourceBuffer(r);a.addEventListener("updateend",this.onsbue)}catch(e){}this.wfs.trigger(o.default.BUFFER_CREATED,{tracks:t}),this.mediaElement.play()}},{key:"onPlayerSeekNow",value:function(){var e=this.mediaElement.buffered.end(0);this.mediaElement.currentTime=e}},{key:"doAppending",value:function e(){var t=this.wfs,r=this.sourceBuffers,n=this.segments;if(Object.keys(r).length){if(this.mediaElement.error){if(this.segments=[],this.mediaErrorCount++,this.mediaErrorCount<100)console.log("doAppending although a media error occured, error code:",this.media.error.code);else{var a={type:i.ErrorTypes.MEDIA_ERROR};a.details=i.ErrorDetails.BUFFER_APPEND_ERROR,a.frag=this.fragCurrent,a.fatal=!0,this.wfs.trigger(o.default.ERROR,a)}return}if(this.mediaErrorCount=0,this.appending)return;if(n&&n.length){var s=n.shift();try{r[s.type]&&(this.parent=s.parent,r[s.type].appendBuffer(s.data),this.appendError=0,this.appended++,this.appending=!0)}catch(e){n.unshift(s);var u={type:i.ErrorTypes.MEDIA_ERROR};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,u.details=i.ErrorDetails.BUFFER_APPEND_ERROR,u.frag=this.fragCurrent,this.appendError>t.config.appendErrorMaxRetry?(n=[],u.fatal=!0):u.fatal=!1):(this.segments=[],u.details=i.ErrorDetails.BUFFER_FULL_ERROR,u.fatal=!0),this.wfs.trigger(o.default.ERROR,u)}}}}}]),r}(a.default),x=T;r.default=x},{"../errors":7,"../event-handler":8,"../events":9,"../utils/mp4-encoder":17}],4:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=a(e("../events")),o=a(e("../event-handler"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=v();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=function(e){f(r,e);var t=d(r);function r(e){var n;return s(this,r),n=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.BUFFER_CREATED,i.default.FILE_PARSING_DATA,i.default.FILE_HEAD_LOADED,i.default.FILE_DATA_LOADED,i.default.WEBSOCKET_ATTACHED,i.default.FRAG_PARSING_DATA,i.default.FRAG_PARSING_INIT_SEGMENT),n.fileStart=0,n.fileEnd=0,n.pendingAppending=0,n.mediaType=void 0,n.channelName,n}return c(r,[{key:"destroy",value:function(){o.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){if(console.log("media attached"),void 0!=e.websocketName){var t="ws://"+window.location.host+"/"+e.websocketName,r="binary",n=new WebSocket(t,r);this.wfs.attachWebsocket(n,e.websocketName,e.channelName)}else console.log("websocketName ERROE!!!")}},{key:"onBufferCreated",value:function(e){this.mediaType=e.mediaType}},{key:"onFileHeadLoaded",value:function(e){}},{key:"onFileDataLoaded",value:function(e){}},{key:"onFileParsingData",value:function(e){}},{key:"onWebsocketAttached",value:function(e){this.wfs.trigger(i.default.BUFFER_APPENDING,{type:"video",data:e.payload,parent:"main"})}},{key:"onFragParsingInitSegment",value:function(e){var t,r=e.tracks,n=r.video;for(t in n&&(n.id=e.id),r){n=r[t];var o=n.initSegment;o&&(this.pendingAppending++,this.wfs.trigger(i.default.BUFFER_APPENDING,{type:t,data:o,parent:"main"}))}}},{key:"onFragParsingData",value:function(e){var t=this;[e.data1,e.data2].forEach((function(r){r&&(t.pendingAppending++,t.wfs.trigger(i.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main"}))}))}}]),r}(o.default),m=g;r.default=m},{"../event-handler":8,"../events":9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../utils/logger");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=function(){function e(t){i(this,e),this.data=t,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return a(e,[{key:"loadWord",value:function(){var e=this.data.byteLength-this.bytesAvailable,t=new Uint8Array(4),r=Math.min(4,this.bytesAvailable);if(0===r)throw new Error("no bytes available");t.set(this.data.subarray(e,e+r)),this.word=new DataView(t.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i}},{key:"readSPS",value:function(){var e,t,r,n,i,o,a,s=0,u=0,c=0,f=0,l=1;if(this.readUByte(),e=this.readUByte(),this.readBits(5),this.skipBits(3),this.readUByte(),this.skipUEG(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var d=this.readUEG();if(3===d&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(o=3!==d?8:12,a=0;a<o;a++)this.readBoolean()&&(a<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var h=this.readUEG();if(0===h)this.readUEG();else if(1===h)for(this.skipBits(1),this.skipEG(),this.skipEG(),t=this.readUEG(),a=0;a<t;a++)this.skipEG();if(this.skipUEG(),this.skipBits(1),r=this.readUEG(),n=this.readUEG(),i=this.readBits(1),0===i&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(s=this.readUEG(),u=this.readUEG(),c=this.readUEG(),f=this.readUEG()),this.readBoolean()&&this.readBoolean()){var p,v=this.readUByte();switch(v){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()];break}p&&(l=p[0]/p[1])}return{width:Math.ceil((16*(r+1)-2*s-2*u)*l),height:(2-i)*(n+1)*16-(i?2:4)*(c+f)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}(),u=s;r.default=u},{"../utils/logger":16}],6:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e("../errors");var i=u(e("../events")),o=u(e("./exp-golomb")),a=u(e("../event-handler")),s=u(e("../remux/mp4-remuxer"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=g();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var b=function(e){d(r,e);var t=p(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c(this,r),n=t.call(this,e,i.default.H264_DATA_PARSING),n.config=n.wfs.config||o,n.wfs=e,n.id="main";MediaSource.isTypeSupported("video/mp4");return n.remuxer=new s.default(n.wfs,n.id,n.config),n.contiguous=!0,n.timeOffset=1,n.sn=0,n.TIMESCALE=9e4,n.timestamp=0,n.scaleFactor=n.TIMESCALE/1e3,n.H264_TIMEBASE=n.config.mp4Duration,n._avcTrack={container:"video/mp4",type:"video",id:1,sequenceNumber:0,samples:[],len:0,nbNalu:0,dropped:0,count:0},n.browserType=0,-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&(n.browserType=1),n}return l(r,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"getTimestampM",value:function(){return this.timestamp+=this.H264_TIMEBASE,this.timestamp}},{key:"onH264DataParsing",value:function(e){this._parseAVCTrack(e.data),this.browserType,this.remuxer.pushVideo(0,this.sn,this._avcTrack,this.timeOffset,this.contiguous),this.sn+=1}},{key:"_parseAVCTrack",value:function(e){var t,r,n,a,s=this,u=this._avcTrack,c=u.samples,f=this._parseAVCNALu(e),l=[],d=!1,h=!1,p=0,v="",y=function(){if(l.length){if(!this.config.forceKeyFrameOnDiscontinuity||!0===h||u.sps&&(c.length||this.contiguous)){var e=this.getTimestampM();r={units:{units:l,length:p},pts:e,dts:e,key:h},c.push(r),u.len+=p,u.nbNalu+=l.length}else u.dropped++;l=[],p=0}}.bind(this);f.forEach((function(e){switch(e.type){case 1:n=!0,d&&(v+="NDR ");break;case 5:n=!0,d&&(v+="IDR "),h=!0;break;case 6:e.data=s.discardEPB(e.data),t=new o.default(e.data),t.readUByte();break;case 7:if(n=!1,d&&(v+="SPS "),!u.sps){t=new o.default(e.data);var r=t.readSPS();u.width=r.width,u.height=r.height,u.sps=[e.data],u.duration=0;var c=e.data.subarray(1,4),f="avc1.";for(a=0;a<3;a++){var g=c[a].toString(16);g.length<2&&(g="0"+g),f+=g}u.codec=f,s.wfs.trigger(i.default.BUFFER_RESET,{mimeType:u.codec,width:u.width,height:u.height}),n=!0}break;case 8:n=!1,d&&(v+="PPS "),u.pps||(u.pps=[e.data],n=!0);break;case 9:n=!1,d&&(v+="AUD "),y();break;default:n=!1,v+="unknown NAL "+e.type+" ";break}n&&(l.push(e),p+=e.data.byteLength)})),(d||v.length)&&logger.log(v),y()}},{key:"_parseAVCNALu",value:function(e){var t,r,n,i,o,a=0,s=e.byteLength,u=0,c=[];while(a<s)switch(t=e[a++],u){case 0:0===t&&(u=1);break;case 1:u=0===t?2:0;break;case 2:case 3:0===t?u=3:1===t&&a<s?(n=31&e[a],i&&(r={data:e.subarray(i,a-u-1),type:o},c.push(r)),i=a,o=n,u=0):u=0;break;default:break}return i&&(r={data:e.subarray(i,s),type:o,state:u},c.push(r)),c}},{key:"discardEPB",value:function(e){var t,r,n=e.byteLength,i=[],o=1;while(o<n-2)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=e[a];return r}}]),r}(a.default),w=b;r.default=w},{"../errors":7,"../event-handler":8,"../events":9,"../remux/mp4-remuxer":15,"./exp-golomb":5}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes=r.ErrorDetails=void 0;var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"};r.ErrorTypes=n;var i={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException",NETWORK_RECV_DATA_TIMEOUT:"networkRecvDataTimeout"};r.ErrorDetails=i},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;n(e("./events"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=function(){function e(t){o(this,e),this.wfs=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return s(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===i(this.handledEvents)&&this.handledEvents.length&&"function"===typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.wfs.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.wfs.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function e(t,r){var n=function(e,t){var r="on"+e.replace("wfs","");return this[r],this[r].bind(this,t)};try{n.call(this,t,r).call()}catch(e){console.log("internal error happened while processing ".concat(t,":").concat(e.message))}}}]),e}(),c=u;r.default=c},{"./events":9}],9:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"wfsMediaAttaching",MEDIA_ATTACHED:"wfsMediaAttached",FRAG_LOADING:"wfsFragLoading",BUFFER_CREATED:"wfsBufferCreated",BUFFER_APPENDING:"wfsBufferAppending",BUFFER_RESET:"wfsBufferReset",BUFFER_CLEAR:"wfsBufferClear",FRAG_PARSING_DATA:"wfsFragParsingData",FRAG_PARSING_INIT_SEGMENT:"wfsFragParsingInitSegment",H264_DATA_APPENDING:"wfsH264DataAppending",H264_DATA_PARSING:"wfsH264DataParsing",WEBSOCKET_ATTACHED:"wfsWebsocketAttached",WEBSOCKET_ATTACHING:"wfsWebsocketAttaching",WEBSOCKET_DATA_UPLOADING:"wfsWebsocketDataUploading",WEBSOCKET_MESSAGE_SENDING:"wfsWebsocketMessageSending",FILE_HEAD_LOADING:"wfsFileHeadLoading",FILE_HEAD_LOADED:"wfsFileHeadLoaded",FILE_DATA_LOADING:"wfsFileDataLoading",FILE_DATA_LOADED:"wfsFileDataLoaded",FILE_PARSING_DATA:"wfsFileParsingData",RECORDING_START:"wfsRecordingStart",PLAYER_SEEK_NOW:"wfsPlayerSeekNow",RECORDING_STOP:"wfsRecordingStop",ERROR:"wfsError"}},{}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(){function e(){n(this,e)}return o(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}(),s=a;r.default=s},{}],11:[function(e,t,r){"use strict";t.exports=e("./wfs.js").default},{"./wfs.js":20}],12:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=a(e("../events")),o=a(e("../event-handler"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=v();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=function(e){f(r,e);var t=d(r);function r(e){var n;return s(this,r),n=t.call(this,e,i.default.FRAG_LOADING,i.default.FILE_HEAD_LOADING,i.default.FILE_DATA_LOADING),n.loaders={},n}return c(r,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)}},{key:"onFileHeadLoading",value:function(e){var t,r,n,i=this.wfs.config,o=new i.loader(i);t={url:i.fmp4FileUrl},r={maxRetry:0,retryDelay:0},n={onSuccess:this.fileloadheadsuccess.bind(this)},o.loadHead(t,r,n)}},{key:"fileloadheadsuccess",value:function(e){this.wfs.trigger(i.default.FILE_HEAD_LOADED,{size:e})}},{key:"onFileDataLoading",value:function(e){var t,r,n,i=this.wfs.config,o=new i.loader(i);t={url:i.fmp4FileUrl,responseType:"arraybuffer",progressData:!1};var a=e.fileStart,s=e.fileEnd;isNaN(a)||isNaN(s)||(t.rangeStart=a,t.rangeEnd=s),r={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},n={onSuccess:this.fileloaddatasuccess.bind(this)},o.load(t,r,n)}},{key:"fileloaddatasuccess",value:function(e,t,r){this.wfs.trigger(i.default.FILE_DATA_LOADED,{payload:e.data,stats:t})}},{key:"loaderror",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0}},{key:"loadtimeout",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0}},{key:"loadprogress",value:function(e,t,r){var n=t.frag;n.loaded=e.loaded}}]),r}(o.default),m=g;r.default=m},{"../event-handler":8,"../events":9}],13:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("../errors"),o=u(e("../events")),a=u(e("../event-handler")),s=u(e("../demux/h264-demuxer"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=g();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var b=function(e){d(r,e);var t=p(r);function r(e){var n;return c(this,r),n=t.call(this,e,o.default.WEBSOCKET_ATTACHING,o.default.WEBSOCKET_DATA_UPLOADING,o.default.WEBSOCKET_MESSAGE_SENDING),n.buf=null,n.ctx=null,n.h264Demuxer=new s.default(e),n.websocketName=void 0,n.media=void 0,n.mediaType=void 0,n.mediaCode=0,n.channelName=void 0,n.isForceClosed=!1,n.timer=void 0,n.lastRecvDataTime=0,n.extraData=void 0,n.isLoaded=!1,n}return l(r,[{key:"create_timer",value:function(){var e=this;this.lastRecvDataTime=performance.now(),console.log("Websocket: create_timer"),this.timer=setInterval((function(){if(e.lastRecvDataTime>0){var t=performance.now(),r=t-e.lastRecvDataTime;if(r>e.wfs.config.wsMinPacketInterval&&console.log("Websocket: did not recv data over "+r+" ms"),r>e.wfs.config.wsMaxPacketInterval&&!e.isForceClosed){e.unload(),console.log("Websocket data not received in "+e.wfs.config.wsMaxPacketInterval/1e3+"s, open again...");var n={type:i.ErrorTypes.NETWORK_ERROR};n.details=i.ErrorDetails.NETWORK_RECV_DATA_TIMEOUT,n.fatal=!0,e.wfs.trigger(o.default.ERROR,n)}}else e.lastRecvDataTime=performance.now()}),this.wfs.config.wsMinPacketInterval)}},{key:"kill_timer",value:function(){this.timer&&(console.log("Websocket close: clear timer"),clearInterval(this.timer),this.timer=void 0)}},{key:"destroy",value:function(){this.kill_timer(),this.isForceClosed=!0,this.client&&this.client.close(),a.default.prototype.destroy.call(this)}},{key:"onWebsocketAttaching",value:function(e){switch(this.kill_timer(),this.create_timer(),e.mediaType){case"MJPEG":this.mediaCode=1,this.ctx=e.media.getContext("2d");break;case"H264Raw":default:this.mediaCode=0;break}this.websocketName=e.websocketName,this.media=e.media,this.mediaType=e.mediaType,this.channelName=e.channelName,this.extraData=e.extraData,e.websocket instanceof WebSocket&&(this.client=e.websocket,this.client.onopen=this.initSocketClient.bind(this),this.client.onclose=this.closeSocketClient.bind(this),this.client.onerror=this.errorSocketClient.bind(this))}},{key:"errorSocketClient",value:function(e){this.unload(),console.log("WebSocket error: ",e)}},{key:"closeSocketClient",value:function(e){this.unload(),console.log("Websocket closed: ",e)}},{key:"initSocketClient",value:function(e){this.load(),console.log("Websocket Open!")}},{key:"receiveSocketMessage",value:function(e){var t=this;if(this.isLoaded)if(this.lastRecvDataTime=performance.now(),0===this.mediaCode){this.buf=new Uint8Array(e.data);var r=new Uint8Array(this.buf),n=new Uint8Array(this.buf);this.wfs.trigger(o.default.H264_DATA_PARSING,{data:r}),this.wfs.trigger(o.default.H264_DATA_APPENDING,{data:n})}else if(1===this.mediaCode)if(this.extraData){if(!this.extraData.isDrawImg)return;if(void 0==this.media||!this.media)return;var i=new FileReader;i.onload=function(e){if(e.target.readyState===FileReader.DONE){var r=t.ctx,n=new Image,i=t.extraData.mjpeg_w,o=t.extraData.mjpeg_h,a=t.extraData.sizeOptionInd,s=t.extraData.getObjectFitSize;n.onload=function(){if(r.clearRect(0,0,i,o),1===a){var e=s(a,i,o,this.width,this.height),t=e.sx,u=e.sy,c=e.swidth,f=e.sheight,l=e.x,d=e.y,h=e.width,p=e.height;r.drawImage(n,t,u,c,f,l,d,h,p)}else r.drawImage(n,0,0,i,o)},n.src=e.target.result}},i.readAsDataURL(e.data)}else console.log("extraData is undefined"),this.extraData=this.wfs.extraData}},{key:"onWebsocketDataUploading",value:function(e){this.client.send(e.data)}},{key:"onWebsocketMessageSending",value:function(e){this.client.send(JSON.stringify({t:e.commandType,c:e.channelName,v:e.commandValue}))}},{key:"load",value:function(){0===this.mediaCode&&(this.client.binaryType="arraybuffer"),this.client.onmessage=this.receiveSocketMessage.bind(this),this.wfs.trigger(o.default.WEBSOCKET_MESSAGE_SENDING,{commandType:"open",channelName:this.channelName,commandValue:"NA"}),this.isLoaded=!0}},{key:"unload",value:function(){this.isLoaded=!1,1===this.mediaCode&&this.ctx.clearRect(0,0,this.extraData.mjpeg_w,this.extraData.mjpeg_h)}}]),r}(a.default),w=b;r.default=w},{"../demux/h264-demuxer":6,"../errors":7,"../event-handler":8,"../events":9}],14:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(){function e(){n(this,e)}return o(e,null,[{key:"init",value:function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;while(i--)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<o;i++)t.set(r[i],n),n+=r[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,r){return r*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))}},{key:"moov",value:function(t){var r=t.length,n=[];while(r--)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))}},{key:"mvex",value:function(t){var r=t.length,n=[];while(r--)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))}},{key:"mvhd",value:function(t,r){r=0;var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,n)}},{key:"sdtp",value:function(t){var r,n,i=t.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var r,n,i,o=[],a=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),u=t.width,c=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,106,101,102,102,45,121,97,110,47,47,47,103,119,102,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var r=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,o=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(t,r){var n=e.sdtp(t),i=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.trun(t,n.length+16+16+8+16+8+8),n)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,r){var n,i,o,a,s,u,c=t.samples||[],f=c.length,l=12+16*f,d=new Uint8Array(l);for(r+=8+l,d.set([0,0,15,1,f>>>24&255,f>>>16&255,f>>>8&255,255&f,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<f;n++)i=c[n],o=i.duration,a=i.size,s=i.flags,u=i.cts,d.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,d)}},{key:"initSegment",value:function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r}}]),e}(),s=a;r.default=s},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("../helper/aac")),i=u(e("../events")),o=e("../utils/logger"),a=u(e("../remux/mp4-generator")),s=e("../errors");function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e("../utils/polyfill");var d=function(){function e(t,r,n){c(this,e),this.observer=t,this.id=r,this.config=n,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR,this.nextAvcDts=90300,this.H264_TIMEBASE=this.config.mp4Duration,this.genISFailCount=0}return l(e,[{key:"passthrough",get:function(){return!1}},{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1,this.genISFailCount=0}},{key:"pushVideo",value:function(e,t,r,n,i){this.level=e,this.sn=t,this.ISGenerated||this.generateVideoIS(r,n),this.ISGenerated&&this.remuxVideo_2(r,n,i)}},{key:"remuxVideo_2",value:function(e,t,r,n){var s,u,c=8,f=e.samples,l=[];s=new Uint8Array(e.len+4*e.nbNalu+8);var d=new DataView(s.buffer);d.setUint32(0,s.byteLength),s.set(a.default.types.mdat,4);for(var h,p,v,y=0,g=0;g<f.length;g++){var m=f[g],b=0;while(m.units.units.length){var w=m.units.units.shift();d.setUint32(c,w.data.byteLength),c+=4,s.set(w.data,c),c+=w.data.byteLength,b+=4+w.data.byteLength}var E=m.pts-this._initPTS,_=m.dts-this._initDTS;if(_=Math.min(E,_),void 0!==v)h=this._PTSNormalize(E,v),p=this._PTSNormalize(_,v),y=p-v,y<=0&&(o.logger.log("invalid sample duration at PTS/DTS: ".concat(m.pts,"/").concat(m.dts,"|dts norm: ").concat(p,"|lastDTS: ").concat(v,":").concat(y)),y=1);else{var A,S=this.nextAvcDts;h=this._PTSNormalize(E,S),p=this._PTSNormalize(_,S),S&&(A=Math.round(p-S),Math.abs(A)<600&&A&&(A>1?o.logger.log("AVC:".concat(A," ms hole between fragments detected,filling it")):A<-1&&o.logger.log("AVC:".concat(-A," ms overlapping between fragments detected")),p=S,h=Math.max(h-A,p),o.logger.log("Video/PTS/DTS adjusted: ".concat(h,"/").concat(p,",delta:").concat(A)))),this.firstPTS=Math.max(0,h),this.firstDTS=Math.max(0,p),y=.03}l.push({size:b,duration:this.H264_TIMEBASE,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:m.key?2:1,isNonSync:m.key?0:1}}),v=p}var T=0;if(l.length>=2&&(T=l[l.length-2].duration,l[0].duration=T),this.nextAvcDts=p+T,e.len=0,e.nbNalu=0,e.dropped=0,l.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var x=l[0].flags;x.dependsOn=2,x.isNonSync=0}e.samples=l,u=a.default.moof(e.sequenceNumber++,p,e),e.samples=[];var R={data1:u,data2:s,type:"video"};return this.observer.trigger(i.default.FRAG_PARSING_DATA,R),R}},{key:"generateVideoIS",value:function(e,t){var r,n,o=this.observer,u=e.samples,c=(this.PES_TIMESCALE,{}),f={id:this.id,level:this.level,sn:this.sn,tracks:c,unique:!1},l=void 0===this._initPTS;l&&(r=n=1/0),e.sps&&e.pps&&u.length&&(e.timescale=9e4,c.video={container:"video/mp4",codec:e.codec,initSegment:a.default.initSegment([e]),metadata:{width:e.width,height:e.height}},l&&(r=Math.min(r,u[0].pts-this.H264_TIMEBASE),n=Math.min(n,u[0].dts-this.H264_TIMEBASE))),Object.keys(c).length?(o.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,f),this.ISGenerated=!0,this.genISFailCount=0,l&&(this._initPTS=r,this._initDTS=n)):(this.genISFailCount++,this.genISFailCount>60&&console.log("generateVideoIS ERROR: ",s.ErrorTypes.MEDIA_ERROR))}},{key:"remux",value:function(e,t,r,n,o,a,s,u){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(r,n,s),this.ISGenerated)if(r.samples.length){var c,f=this.remuxAudio(r,s,u);if(n.samples.length)f&&(c=f.endPTS-f.startPTS),this.remuxVideo(n,s,u,c)}else{var l;n.samples.length&&(l=this.remuxVideo(n,s,u)),l&&r.codec&&this.remuxEmptyAudio(r,s,u,l)}o.samples.length&&this.remuxID3(o,s),a.samples.length&&this.remuxText(a,s),this.observer.trigger(i.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,r){var n,u,c=this.observer,f=e.samples,l=t.samples,d=this.PES_TIMESCALE,h={},p={id:this.id,level:this.level,sn:this.sn,tracks:h,unique:!1},v=void 0===this._initPTS;if(v&&(n=u=1/0),e.config&&f.length){if(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)){var y=function e(t,r){return r?e(r,t%r):t};e.timescale=e.audiosamplerate/y(e.audiosamplerate,1024)}o.logger.log("audio mp4 timescale :"+e.timescale),h.audio={container:"audio/mp4",codec:e.codec,initSegment:a.default.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(n=u=f[0].pts-d*r)}t.sps&&t.pps&&l.length&&(t.timescale=this.MP4_TIMESCALE,h.video={container:"video/mp4",codec:t.codec,initSegment:a.default.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(n=Math.min(n,l[0].pts-d*r),u=Math.min(u,l[0].dts-d*r))),Object.keys(h).length?(c.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,v&&(this._initPTS=n,this._initDTS=u)):c.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,id:this.id,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxAudio",value:function(e,t,r){var s,u,c,f,l,d,h,p,v,y,g,m,b,w=this.PES_TIMESCALE,E=e.timescale,_=w/E,A=1024*e.timescale/e.audiosamplerate,S=8,T=[],x=[];e.samples.sort((function(e,t){return e.pts-t.pts})),x=e.samples;for(var R=r?this.nextAacPts:t*w,k=this._PTSNormalize(x[0].pts-this._initPTS,R),O=A*_,P=k+O,I=1;I<x.length;){var L=x[I],D=this._PTSNormalize(L.pts-this._initPTS,R),C=D-P;if(C<-.5*O)o.logger.log("Dropping frame due to ".concat(Math.abs(C/90)," ms overlap.")),x.splice(I,1),e.len-=L.unit.length;else if(C>.5*O){var F=Math.round(C/O);o.logger.log("Injecting ".concat(F," frame").concat(F>1?"s":""," of missing audio due to ").concat(Math.round(C/90)," ms gap."));for(var M=0;M<F;M++){var N=x[I-1].pts+O,U=n.default.getSilentFrame(e.channelCount);U||(o.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),U=L.unit.slice(0)),x.splice(I,0,{unit:U,pts:N,dts:N}),e.len+=U.length,I+=1}P+=(F+1)*O,L.pts=x[I-1].pts+O,I+=1}else Math.abs(C)>.1*O&&o.logger.log("Invalid frame delta ".concat(D-P+O," at PTS ").concat(Math.round(D/90)," (should be ").concat(O,").")),P+=O,L.pts=x[I-1].pts+O,I+=1}while(x.length){if(u=x.shift(),f=u.unit,y=u.pts-this._initDTS,g=u.dts-this._initDTS,void 0!==v)m=this._PTSNormalize(y,v),b=this._PTSNormalize(g,v),c.duration=(b-v)/_;else{m=this._PTSNormalize(y,R),b=this._PTSNormalize(g,R);var j=Math.round(1e3*(m-R)/w);if(r&&j){if(j>0)o.logger.log("".concat(j," ms hole between AAC samples detected,filling it"));else if(j<-12){o.logger.log("".concat(-j," ms overlapping between AAC samples detected, drop frame")),e.len-=f.byteLength;continue}m=b=R}if(h=Math.max(0,m),p=Math.max(0,b),!(e.len>0))return;l=new Uint8Array(e.len+8),s=new DataView(l.buffer),s.setUint32(0,l.byteLength),l.set(a.default.types.mdat,4)}l.set(f,S),S+=f.byteLength,c={size:f.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c),v=b}var B=0,G=T.length;if(G>=2&&(B=T[G-2].duration,c.duration=B),G){this.nextAacPts=m+_*B,e.len=0,e.samples=T,d=a.default.moof(e.sequenceNumber++,p/_,e),e.samples=[];var H={id:this.id,level:this.level,sn:this.sn,data1:d,data2:l,startPTS:h/w,endPTS:this.nextAacPts/w,startDTS:p/w,endDTS:(b+_*B)/w,type:"audio",nb:G};return this.observer.trigger(i.default.FRAG_PARSING_DATA,H),H}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,i){var a=this.PES_TIMESCALE,s=e.timescale?e.timescale:e.audiosamplerate,u=a/s,c=i.startDTS*a+this._initDTS,f=i.endDTS*a+this._initDTS,l=1024,d=u*l,h=Math.ceil((f-c)/d),p=n.default.getSilentFrame(e.channelCount);if(p){for(var v=[],y=0;y<h;y++){var g=c+y*d;v.push({unit:p.slice(0),pts:g,dts:g}),e.len+=p.length}e.samples=v,this.remuxAudio(e,t,r)}else o.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var r,n=e.samples.length;if(n){for(var o=0;o<n;o++)r=e.samples[o],r.pts=(r.pts-this._initPTS)/this.PES_TIMESCALE,r.dts=(r.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(i.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort((function(e,t){return e.pts-t.pts}));var r,n=e.samples.length;if(n){for(var o=0;o<n;o++)r=e.samples[o],r.pts=(r.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(i.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;r=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=r;return e}}]),e}(),h=d;r.default=h},{"../errors":7,"../events":9,"../helper/aac":10,"../remux/mp4-generator":14,"../utils/logger":16,"../utils/polyfill":18}],16:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(){}Object.defineProperty(r,"__esModule",{value:!0}),r.logger=r.enableLogs=void 0;var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;function s(e,t){return t="["+e+"] > "+t,t}function u(e){var t=window.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=s(e,n[0])),t.apply(window.console,n)}:i}function c(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){a[t]=e[t]?e[t].bind(e):u(t)}))}var f=function(t){if(!0===t||"object"===n(t)){c(t,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o};r.enableLogs=f;var l=a;r.logger=l},{}],17:[function(e,t,r){(function(e){(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.createEncoderWithModule=a,r.createFile=o,r.default=void 0;var n=function(){var r="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(n){n=n||{};var i,o;n="undefined"!=typeof n?n:{};n["ready"]=new Promise((function(e,t){i=e,o=t})),n["createEncoder"]=function(e){return a(n,e)};var s,u=Object.assign({},n),c=[],f="object"==("undefined"===typeof window?"undefined":t(window)),l="function"==typeof importScripts,d=("object"==("undefined"===typeof e?"undefined":t(e))&&"object"==t(e.versions)&&e.versions.node,"");function h(e){return n["locateFile"]?n["locateFile"](e,d):d+e}(f||l)&&(l?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),r&&(d=r),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});n["print"]||console.log.bind(console);var p=n["printErr"]||console.warn.bind(console);Object.assign(n,u),u=null,n["arguments"]&&(c=n["arguments"]),n["thisProgram"]&&n["thisProgram"],n["quit"]&&n["quit"];var v,y=4;n["wasmBinary"]&&(v=n["wasmBinary"]);var g;n["noExitRuntime"];"object"!=("undefined"===typeof WebAssembly?"undefined":t(WebAssembly))&&K("no native wasm support detected");var m,b,w,E,_,A,S,T,x,R=!1;function k(e,t,r){var n=t+r,i="";while(!(t>=n)){var o=e[t++];if(!o)return i;if(128&o){var a=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if(o=224==(240&o)?(15&o)<<12|a<<6|s:(7&o)<<18|a<<12|s<<6|63&e[t++],o<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|a)}else i+=String.fromCharCode(o)}return i}function O(e,t){return e?k(w,e,t):""}function P(e,t,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343){var u=e.charCodeAt(++a);s=65536+((1023&s)<<10)|1023&u}if(s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-i}function I(e,t,r){return P(e,w,t,r)}function L(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t}function D(e){m=e,n["HEAP8"]=b=new Int8Array(e),n["HEAP16"]=E=new Int16Array(e),n["HEAP32"]=A=new Int32Array(e),n["HEAPU8"]=w=new Uint8Array(e),n["HEAPU16"]=_=new Uint16Array(e),n["HEAPU32"]=S=new Uint32Array(e),n["HEAPF32"]=T=new Float32Array(e),n["HEAPF64"]=x=new Float64Array(e)}n["INITIAL_MEMORY"];var C,F=[],M=[],N=[];function U(){if(n["preRun"]){"function"==typeof n["preRun"]&&(n["preRun"]=[n["preRun"]]);while(n["preRun"].length)G(n["preRun"].shift())}re(F)}function j(){!0,re(M)}function B(){if(n["postRun"]){"function"==typeof n["postRun"]&&(n["postRun"]=[n["postRun"]]);while(n["postRun"].length)W(n["postRun"].shift())}re(N)}function G(e){F.unshift(e)}function H(e){M.unshift(e)}function W(e){N.unshift(e)}var z=0,V=null,q=null;function Y(e){z++,n["monitorRunDependencies"]&&n["monitorRunDependencies"](z)}function $(e){if(z--,n["monitorRunDependencies"]&&n["monitorRunDependencies"](z),0==z&&(null!==V&&(clearInterval(V),V=null),q)){var t=q;q=null,t()}}function K(e){n["onAbort"]&&n["onAbort"](e),e="Aborted("+e+")",p(e),R=!0,1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw o(t),t}var J,X="data:application/octet-stream;base64,";function Z(e){return e.startsWith(X)}function Q(e){try{if(e==J&&v)return new Uint8Array(v);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}catch(e){K(e)}}function ee(){return v||!f&&!l||"function"!=typeof fetch?Promise.resolve().then((function(){return Q(J)})):fetch(J,{credentials:"same-origin"}).then((function(e){if(!e["ok"])throw"failed to load wasm binary file at '"+J+"'";return e["arrayBuffer"]()})).catch((function(){return Q(J)}))}function te(){var e={a:kt};function t(e,t){var r=e.exports;n["asm"]=r,g=n["asm"]["x"],D(g.buffer),C=n["asm"]["B"],H(n["asm"]["y"]),$("wasm-instantiate")}function r(e){t(e["instance"])}function i(t){return ee().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),K(e)}))}function a(){return v||"function"!=typeof WebAssembly.instantiateStreaming||Z(J)||"function"!=typeof fetch?i(r):fetch(J,{credentials:"same-origin"}).then((function(t){var n=WebAssembly.instantiateStreaming(t,e);return n.then(r,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),i(r)}))}))}if(Y("wasm-instantiate"),n["instantiateWasm"])try{var s=n["instantiateWasm"](e,t);return s}catch(a){p("Module.instantiateWasm callback failed with error: "+a),o(a)}return a().catch(o),{}}function re(e){while(e.length>0)e.shift()(n)}function ne(e,t,r,n){K("Assertion failed: "+O(e)+", at: "+[t?O(t):"unknown filename",r,n?O(n):"unknown function"])}function ie(e,t,r,n,i){}function oe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function ae(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);se=e}J="mp4-encoder.wasm",Z(J)||(J=h(J));var se=void 0;function ue(e){var t="",r=e;while(w[r])t+=se[w[r++]];return t}var ce={},fe={},le={},de=48,he=57;function pe(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=de&&t<=he?"_"+e:e}function ve(e,t){return e=pe(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function ye(e,t){var r=ve(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var ge=void 0;function me(e){throw new ge(e)}var be=void 0;function we(e){throw new be(e)}function Ee(e,t,r){function n(t){var n=r(t);n.length!==e.length&&we("Mismatched type converter count");for(var i=0;i<e.length;++i)_e(e[i],n[i])}e.forEach((function(e){le[e]=t}));var i=new Array(t.length),o=[],a=0;t.forEach((function(e,t){fe.hasOwnProperty(e)?i[t]=fe[e]:(o.push(e),ce.hasOwnProperty(e)||(ce[e]=[]),ce[e].push((function(){i[t]=fe[e],++a,a===o.length&&n(i)})))})),0===o.length&&n(i)}function _e(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||me('type "'+n+'" must have a positive integer typeid pointer'),fe.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;me("Cannot register type '"+n+"' twice")}if(fe[e]=t,delete le[e],ce.hasOwnProperty(e)){var i=ce[e];delete ce[e],i.forEach((function(e){return e()}))}}function Ae(e,t,r,n,i){var o=oe(r);t=ue(t),_e(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:i},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=b;else if(2===r)n=E;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=A}return this["fromWireType"](n[e>>o])},destructorFunction:null})}var Se=[],Te=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function xe(e){e>4&&0===--Te[e].refcount&&(Te[e]=void 0,Se.push(e))}function Re(){for(var e=0,t=5;t<Te.length;++t)void 0!==Te[t]&&++e;return e}function ke(){for(var e=5;e<Te.length;++e)if(void 0!==Te[e])return Te[e];return null}function Oe(){n["count_emval_handles"]=Re,n["get_first_emval"]=ke}var Pe={toValue:function(e){return e||me("Cannot use deleted val. handle = "+e),Te[e].value},toHandle:function(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Se.length?Se.pop():Te.length;return Te[t]={refcount:1,value:e},t}}};function Ie(e){return this["fromWireType"](A[e>>2])}function Le(e,t){t=ue(t),_e(e,{name:t,fromWireType:function(e){var t=Pe.toValue(e);return xe(e),t},toWireType:function(e,t){return Pe.toHandle(t)},argPackAdvance:8,readValueFromPointer:Ie,destructorFunction:null})}function De(e,t){switch(t){case 2:return function(e){return this["fromWireType"](T[e>>2])};case 3:return function(e){return this["fromWireType"](x[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Ce(e,t,r){var n=oe(r);t=ue(t),_e(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:De(t,n),destructorFunction:null})}function Fe(e,r){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+t(e)+" which is not a function");var n=ve(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var i=new n,o=e.apply(i,r);return o instanceof Object?o:i}function Me(e){while(e.length){var t=e.pop(),r=e.pop();r(t)}}function Ne(e,t,r,n,i){var o=t.length;o<2&&me("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var c="void"!==t[0].name,f="",l="";for(u=0;u<o-2;++u)f+=(0!==u?", ":"")+"arg"+u,l+=(0!==u?", ":"")+"arg"+u+"Wired";var d="return function "+pe(e)+"("+f+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var h=s?"destructors":"null",p=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=[me,n,i,Me,t[0],t[1]];a&&(d+="var thisWired = classParam.toWireType("+h+", this);\n");for(u=0;u<o-2;++u)d+="var arg"+u+"Wired = argType"+u+".toWireType("+h+", arg"+u+"); // "+t[u+2].name+"\n",p.push("argType"+u),v.push(t[u+2]);if(a&&(l="thisWired"+(l.length>0?", ":"")+l),d+=(c?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",s)d+="runDestructors(destructors);\n";else for(u=a?1:2;u<t.length;++u){var y=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(d+=y+"_dtor("+y+"); // "+t[u].name+"\n",p.push(y+"_dtor"),v.push(t[u].destructorFunction))}c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",p.push(d);var g=Fe(Function,p).apply(null,v);return g}function Ue(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||me("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function je(e,t,r){n.hasOwnProperty(e)?((void 0===r||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[r])&&me("Cannot register public name '"+e+"' twice"),Ue(n,e,e),n.hasOwnProperty(r)&&me("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),n[e].overloadTable[r]=t):(n[e]=t,void 0!==r&&(n[e].numArguments=r))}function Be(e,t){for(var r=[],n=0;n<e;n++)r.push(S[t+4*n>>2]);return r}function Ge(e,t,r){n.hasOwnProperty(e)||we("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==r?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)}function He(e,t,r){var i=n["dynCall_"+e];return r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)}var We=[];function ze(e){var t=We[e];return t||(e>=We.length&&(We.length=e+1),We[e]=t=C.get(e)),t}function Ve(e,t,r){if(e.includes("j"))return He(e,t,r);var n=ze(t).apply(null,r);return n}function qe(e,t){var r=[];return function(){return r.length=0,Object.assign(r,arguments),Ve(e,t,r)}}function Ye(e,t){function r(){return e.includes("j")?qe(e,t):ze(t)}e=ue(e);var n=r();return"function"!=typeof n&&me("unknown function pointer with signature "+e+": "+t),n}var $e=void 0;function Ke(e){var t=It(e),r=ue(t);return Pt(t),r}function Je(e,t){var r=[],n={};function i(e){n[e]||fe[e]||(le[e]?le[e].forEach(i):(r.push(e),n[e]=!0))}throw t.forEach(i),new $e(e+": "+r.map(Ke).join([", "]))}function Xe(e,t,r,n,i,o){var a=Be(t,r);e=ue(e),i=Ye(n,i),je(e,(function(){Je("Cannot call "+e+" due to unbound types",a)}),t-1),Ee([],a,(function(r){var n=[r[0],null].concat(r.slice(1));return Ge(e,Ne(e,n,null,i,o),t-1),[]}))}function Ze(e,t,r){switch(t){case 0:return r?function(e){return b[e]}:function(e){return w[e]};case 1:return r?function(e){return E[e>>1]}:function(e){return _[e>>1]};case 2:return r?function(e){return A[e>>2]}:function(e){return S[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Qe(e,t,r,n,i){t=ue(t),-1===i&&(i=4294967295);var o=oe(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var u,c=t.includes("unsigned"),f=function(e,t){};u=c?function(e,t){return f(t,this.name),t>>>0}:function(e,t){return f(t,this.name),t},_e(e,{name:t,fromWireType:a,toWireType:u,argPackAdvance:8,readValueFromPointer:Ze(t,o,0!==n),destructorFunction:null})}function et(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=n[t];function o(e){e>>=2;var t=S,r=t[e],n=t[e+1];return new i(m,n,r)}r=ue(r),_e(e,{name:r,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function tt(e,t){t=ue(t);var r="std::string"===t;_e(e,{name:t,fromWireType:function(e){var t,n=S[e>>2],i=e+4;if(r)for(var o=i,a=0;a<=n;++a){var s=i+a;if(a==n||0==w[s]){var u=s-o,c=O(o,u);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),o=s+1}}else{var f=new Array(n);for(a=0;a<n;++a)f[a]=String.fromCharCode(w[i+a]);t=f.join("")}return Pt(e),t},toWireType:function(e,t){var n;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||me("Cannot pass non-string to std::string"),n=r&&i?L(t):t.length;var o=Ot(4+n+1),a=o+4;if(S[o>>2]=n,r&&i)I(t,a,n+1);else if(i)for(var s=0;s<n;++s){var u=t.charCodeAt(s);u>255&&(Pt(a),me("String has UTF-16 code units that do not fit in 8 bits")),w[a+s]=u}else for(s=0;s<n;++s)w[a+s]=t[s];return null!==e&&e.push(Pt,o),o},argPackAdvance:8,readValueFromPointer:Ie,destructorFunction:function(e){Pt(e)}})}function rt(e,t){for(var r="",n=0;!(n>=t/2);++n){var i=E[e+2*n>>1];if(0==i)break;r+=String.fromCharCode(i)}return r}function nt(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;r-=2;for(var n=t,i=r<2*e.length?r/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);E[t>>1]=a,t+=2}return E[t>>1]=0,t-n}function it(e){return 2*e.length}function ot(e,t){var r=0,n="";while(!(r>=t/4)){var i=A[e+4*r>>2];if(0==i)break;if(++r,i>=65536){var o=i-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(i)}return n}function at(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,i=n+r-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343){var s=e.charCodeAt(++o);a=65536+((1023&a)<<10)|1023&s}if(A[t>>2]=a,t+=4,t+4>i)break}return A[t>>2]=0,t-n}function st(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function ut(e,t,r){var n,i,o,a,s;r=ue(r),2===t?(n=rt,i=nt,a=it,o=function(){return _},s=1):4===t&&(n=ot,i=at,a=st,o=function(){return S},s=2),_e(e,{name:r,fromWireType:function(e){for(var r,i=S[e>>2],a=o(),u=e+4,c=0;c<=i;++c){var f=e+4+c*t;if(c==i||0==a[f>>s]){var l=f-u,d=n(u,l);void 0===r?r=d:(r+=String.fromCharCode(0),r+=d),u=f+t}}return Pt(e),r},toWireType:function(e,n){"string"!=typeof n&&me("Cannot pass non-string to C++ string type "+r);var o=a(n),u=Ot(4+o+t);return S[u>>2]=o>>s,i(n,u+4,o+t),null!==e&&e.push(Pt,u),u},argPackAdvance:8,readValueFromPointer:Ie,destructorFunction:function(e){Pt(e)}})}function ct(e,t){t=ue(t),_e(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function ft(e,t){var r=fe[e];return void 0===r&&me(t+" has unknown type "+Ke(e)),r}function lt(e,t,r){e=Pe.toValue(e),t=ft(t,"emval::as");var n=[],i=Pe.toHandle(n);return S[r>>2]=i,t["toWireType"](n,e)}function dt(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=ft(S[t+n*y>>2],"parameter "+n);return r}function ht(e,t,r,n){e=Pe.toValue(e);for(var i=dt(t,r),o=new Array(t),a=0;a<t;++a){var s=i[a];o[a]=s["readValueFromPointer"](n),n+=s["argPackAdvance"]}var u=e.apply(void 0,o);return Pe.toHandle(u)}function pt(e,t){return e=Pe.toValue(e),t=Pe.toValue(t),Pe.toHandle(e[t])}function vt(e){e>4&&(Te[e].refcount+=1)}function yt(e){return e=Pe.toValue(e),"number"==typeof e}var gt={};function mt(e){var t=gt[e];return void 0===t?ue(e):t}function bt(e){return Pe.toHandle(mt(e))}function wt(e){var t=Pe.toValue(e);Me(t),xe(e)}function Et(e,t){e=ft(e,"_emval_take_value");var r=e["readValueFromPointer"](t);return Pe.toHandle(r)}function _t(){K("")}function At(e,t,r){w.copyWithin(e,t,t+r)}function St(){return 2147483648}function Tt(e){try{return g.grow(e-m.byteLength+65535>>>16),D(g.buffer),1}catch(e){}}function xt(e){var t=w.length;e>>>=0;var r=St();if(e>r)return!1;for(var n=function(e,t){return e+(t-e%t)%t},i=1;i<=4;i*=2){var o=t*(1+.2/i);o=Math.min(o,e+100663296);var a=Math.min(r,n(Math.max(e,o),65536)),s=Tt(a);if(s)return!0}return!1}ae(),ge=n["BindingError"]=ye(Error,"BindingError"),be=n["InternalError"]=ye(Error,"InternalError"),Oe(),$e=n["UnboundTypeError"]=ye(Error,"UnboundTypeError");var Rt,kt={a:ne,q:ie,u:Ae,t:Le,o:Ce,h:Xe,d:Qe,c:et,n:tt,l:ut,v:ct,k:lt,w:ht,b:xe,e:pt,g:vt,p:yt,f:bt,j:wt,i:Et,m:_t,s:At,r:xt},Ot=(te(),n["___wasm_call_ctors"]=function(){return(n["___wasm_call_ctors"]=n["asm"]["y"]).apply(null,arguments)},n["_malloc"]=function(){return(Ot=n["_malloc"]=n["asm"]["z"]).apply(null,arguments)}),Pt=n["_free"]=function(){return(Pt=n["_free"]=n["asm"]["A"]).apply(null,arguments)},It=n["___getTypeName"]=function(){return(It=n["___getTypeName"]=n["asm"]["C"]).apply(null,arguments)};n["__embind_initialize_bindings"]=function(){return(n["__embind_initialize_bindings"]=n["asm"]["D"]).apply(null,arguments)},n["dynCall_ijiii"]=function(){return(n["dynCall_ijiii"]=n["asm"]["E"]).apply(null,arguments)};function Lt(e){function t(){Rt||(Rt=!0,n["calledRun"]=!0,R||(j(),i(n),n["onRuntimeInitialized"]&&n["onRuntimeInitialized"](),B()))}e=e||c,z>0||(U(),z>0||(n["setStatus"]?(n["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){n["setStatus"]("")}),1),t()}),1)):t()))}if(q=function e(){Rt||Lt(),Rt||(q=e)},n["preInit"]){"function"==typeof n["preInit"]&&(n["preInit"]=[n["preInit"]]);while(n["preInit"].length>0)n["preInit"].pop()()}return Lt(),n.ready}}(),i=n;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,t=0,r=0,n=new Uint8Array(e);return{contents:function(){return n.slice(0,r)},seek:function(e){t=e},write:function(e){var o=e.byteLength;return i(t+o),n.set(e,t),t+=o,r=Math.max(r,t),o}};function i(e){var t=n.length;if(!(t>=e)){var i=1048576;e=Math.max(e,t*(t<i?2:1.125)>>>0),0!=t&&(e=Math.max(e,256));var o=n;n=new Uint8Array(e),r>0&&n.set(o.subarray(0,r),0)}}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.width,n=t.height,i=t.fps,a=void 0===i?30:i,s=t.fragmentation,u=void 0!==s&&s,c=t.sequential,f=void 0!==c&&c,l=t.hevc,d=void 0!==l&&l;if("number"!==typeof r||"number"!==typeof n)throw new Error("Must specify { width, height } options");if(!isFinite(r)||r<0||!isFinite(n)||n<0)throw new Error("{ width, height } options must be positive integers");var h=o(),p=e.create_muxer({width:r,height:n,fps:a,fragmentation:u,sequential:f,hevc:d},v);return{end:function(){return e.finalize_muxer(p),h.contents()},addNalu:function(t){var r=e._malloc(t.byteLength);e.HEAPU8.set(t,r),e.mux_nal(p,r,t.byteLength),e._free(r)}};function v(t,r,n){h.seek(n);var i=e.HEAPU8.subarray(t,t+r);return h.write(i)!==i.byteLength}}r.default=i,n.createFile=o}).call(this)}).call(this,e("_process"))},{_process:2}],18:[function(e,t,r){"use strict";"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var r=new Uint8Array(this);void 0===t&&(t=r.length);for(var n=new ArrayBuffer(t-e),i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o+e];return n})},{}],19:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(){function e(t){n(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return o(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"loadHead",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay;var n=new XMLHttpRequest;n.open("head",e.url),n.onload=function(){r.onSuccess(n.getResponseHeader("content-length"))},n.send()}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!==typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e.onloadend=this.loadend.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var r=this.stats;r.tfirst=0,r.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"loadend",value:function(e){var t=e.currentTarget,r=t.status,n=this.stats,i=this.context,o=this.config;if(!n.aborted)if(window.clearTimeout(this.requestTimeout),r>=200&&r<300){var a,s;n.tload=Math.max(n.tfirst,performance.now()),"arraybuffer"===i.responseType?(a=t.response,s=a.byteLength):(a=t.responseText,s=a.length),n.loaded=n.total=s;var u={url:t.responseURL,data:a};this.callbacks.onSuccess(u,n,i)}else n.retry>=o.maxRetry||r>=400&&r<499?this.callbacks.onError({code:r,text:t.statusText},i):(this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}},{key:"loadtimeout",value:function(){this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;0===t.tfirst&&(t.tfirst=Math.max(performance.now(),t.trequest)),t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var r=this.callbacks.onProgress;r&&r(t,this.context,null)}}]),e}(),s=a;r.default=s},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("./errors"),i=f(e("./events")),o=f(e("./controller/flow-controller")),a=f(e("./controller/buffer-controller")),s=f(e("events")),u=f(e("./utils/xhr-loader")),c=(f(e("./loader/file-loader")),f(e("./loader/websocket-loader")));function f(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e);var r=e.DefaultConfig;for(var n in r)n in t||(t[n]=r[n]);this.config=t;var i=this.observer=new s.default;i.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i),this.flowController=new o.default(this),this.bufferController=new a.default(this),this.websocketLoader=new c.default(this),this.mediaType=void 0,this.extraData=void 0}return h(e,[{key:"destroy",value:function(){console.log("wfs destroy +++"),this.flowController.destroy(),this.bufferController.destroy(),this.websocketLoader.destroy(),console.log("wfs destroy ---")}},{key:"attachMedia",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chX",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"H264Raw",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"play2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.mediaType=r,this.media=e,this.extraData=o;var a=void 0;switch(r){case"MJPEG":a=i.default.MEDIA_ATTACHED;break;case"H264Raw":default:a=i.default.MEDIA_ATTACHING;break}this.trigger(a,{media:e,channelName:t,mediaType:r,websocketName:n,extraData:this.extraData})}},{key:"attachWebsocket",value:function(e,t,r){this.trigger(i.default.WEBSOCKET_ATTACHING,{websocket:e,websocketName:t,media:this.media,mediaType:this.mediaType,channelName:r,extraData:this.extraData})}},{key:"start_recording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1073741824,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.trigger(i.default.RECORDING_START,{rec_file_threshold:e,result_cb:t,state_cb:r})}},{key:"playerSeekNow",value:function(){this.trigger(i.default.PLAYER_SEEK_NOW)}},{key:"stop_recording",value:function(){this.trigger(i.default.RECORDING_STOP)}}],[{key:"version",get:function(){return"v.0.0.0.1"}},{key:"isSupported",value:function(){return window.MediaSource&&"function"===typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42c01f,mp4a.40.2"')}},{key:"Events",get:function(){return i.default}},{key:"ErrorTypes",get:function(){return n.ErrorTypes}},{key:"ErrorDetails",get:function(){return n.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,debug:!1,fLoader:void 0,loader:u.default,fmp4FileUrl:"xxxx.mp4",fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,forceKeyFrameOnDiscontinuity:!0,appendErrorMaxRetry:3,wsMinPacketInterval:3e3,wsMaxPacketInterval:3e4,mp4Duration:1e3}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),e}(),v=p;r.default=v},{"./controller/buffer-controller":3,"./controller/flow-controller":4,"./errors":7,"./events":9,"./loader/file-loader":12,"./loader/websocket-loader":13,"./utils/xhr-loader":19,events:1}]},{},[11])(11)}))},d139:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").find,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d28b:function(e,t,r){var n=r("746f");n("iterator")},d58f:function(e,t,r){var n=r("da84"),i=r("59ed"),o=r("7b0b"),a=r("44ad"),s=r("07fa"),u=n.TypeError,c=function(e){return function(t,r,n,c){i(r);var f=o(t),l=a(f),d=s(f),h=e?d-1:0,p=e?-1:1;if(n<2)while(1){if(h in l){c=l[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw u("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in l&&(c=r(c,l[h],h,f));return c}};e.exports={left:c(!1),right:c(!0)}},d5d6:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").forEach,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d784:function(e,t,r){"use strict";r("ac1f");var n=r("e330"),i=r("6eeb"),o=r("9263"),a=r("d039"),s=r("b622"),u=r("9112"),c=s("species"),f=RegExp.prototype;e.exports=function(e,t,r,l){var d=s(e),h=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=h&&!a((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return t=!0,null},r[d](""),!t}));if(!h||!p||r){var v=n(/./[d]),y=t(d,""[e],(function(e,t,r,i,a){var s=n(e),u=t.exec;return u===o||u===f.exec?h&&!a?{done:!0,value:v(t,r,i)}:{done:!0,value:s(r,t,i)}:{done:!1}}));i(String.prototype,e,y[0]),i(f,d,y[1])}l&&u(f[d],"sham",!0)}},d81d:function(e,t,r){"use strict";var n=r("23e7"),i=r("b727").map,o=r("1dde"),a=o("map");n({target:"Array",proto:!0,forced:!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d998:function(e,t,r){var n=r("342f");e.exports=/MSIE|Trident/.test(n)},dfb9:function(e,t){e.exports=function(e,t){var r=0,n=t.length,i=new e(n);while(n>r)i[r]=t[r++];return i}},e01a:function(e,t,r){"use strict";var n=r("23e7"),i=r("83ab"),o=r("da84"),a=r("e330"),s=r("1a2d"),u=r("1626"),c=r("3a9b"),f=r("577e"),l=r("9bf2").f,d=r("e893"),h=o.Symbol,p=h&&h.prototype;if(i&&u(h)&&(!("description"in p)||void 0!==h().description)){var v={},y=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),t=c(p,this)?new h(e):void 0===e?h():h(e);return""===e&&(v[t]=!0),t};d(y,h),y.prototype=p,p.constructor=y;var g="Symbol(test)"==String(h("test")),m=a(p.toString),b=a(p.valueOf),w=/^Symbol\((.*)\)[^)]+$/,E=a("".replace),_=a("".slice);l(p,"description",{configurable:!0,get:function(){var e=b(this),t=m(e);if(s(v,e))return"";var r=g?_(t,7,-1):E(t,w,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:y})}},e538:function(e,t,r){var n=r("b622");t.f=n},e58c:function(e,t,r){"use strict";var n=r("2ba4"),i=r("fc6a"),o=r("5926"),a=r("07fa"),s=r("a640"),u=Math.min,c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf"),d=f||!l;e.exports=d?function(e){if(f)return n(c,this,arguments)||0;var t=i(this),r=a(t),s=r-1;for(arguments.length>1&&(s=u(s,o(arguments[1]))),s<0&&(s=r+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:c},e6c4:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"preview_capture_container"},[r("el-main",{staticClass:"preview_capture_left_container"},[r("el-container",{staticClass:"preview_container"},[r("el-main",{ref:"axMain",staticClass:"video_container"},[r("video",{directives:[{name:"show",rawName:"v-show",value:1!=e.streamOptionInd,expression:"streamOptionInd != 1"}],ref:"axVideoRef",staticClass:"axVideo",attrs:{id:"myVideo",autoplay:"",muted:"",playsinline:"",oncontextmenu:"return false;"},domProps:{muted:!0}}),r("canvas",{directives:[{name:"show",rawName:"v-show",value:1==e.streamOptionInd,expression:"streamOptionInd == 1"}],staticClass:"axVideo2",attrs:{id:"myMjpeg"}})]),r("el-footer",{staticClass:"video_controls_container",attrs:{height:"40px"}},[r("div",{staticClass:"left_controls_container"},[r("div",{staticClass:"size_option"},[r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.changeSizeOption}},[r("el-button",{staticClass:"el-dropdown-link",attrs:{type:"text"}},[e._v(e._s(e.sizeOptions[e.sizeOptionInd].label))]),r("el-dropdown-menu",{attrs:{slot:"dropdown","append-to-body":!1},slot:"dropdown"},e._l(e.sizeOptions,(function(t){return r("el-dropdown-item",{key:t.id,attrs:{command:t.id+"",icon:t.icon}},[e._v(e._s(t.label))])})),1)],1)],1),r("div",[r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.changeStream}},[r("el-button",{staticClass:"el-dropdown-link",attrs:{type:"text"}},[e._v(e._s(e.streamOptions[e.streamOptionInd].label))]),r("el-dropdown-menu",{attrs:{slot:"dropdown","append-to-body":!1},slot:"dropdown"},e._l(e.streamOptions,(function(t){return r("el-dropdown-item",{key:t.id,attrs:{command:t.id+"",icon:t.icon}},[e._v(e._s(t.label))])})),1)],1)],1)]),r("div",{staticClass:"right_controls_container"},[r("div",{staticClass:"full_option"},[r("el-tooltip",{attrs:{effect:"dark",content:e.isFullScreen?"退出全屏":"进入全屏",placement:"top-end",enterable:!1}},[r("el-button",{staticClass:"full_button",attrs:{icon:e.screenIcon},on:{click:e.doScreen}})],1)],1)])])],1)],1),r("el-aside",{staticClass:"capture_container",attrs:{width:"1px"}})],1)},i=[],o=r("1da1"),a=(r("a9e3"),r("a4d3"),r("e01a"),r("96cf"),r("d022")),s=r.n(a),u=r("93bf"),c=r.n(u),f={data:function(){return{captureImages:[{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""},{src:"",date:""}],sizeOptions:[{id:0,label:"自适应",value:"0:0",icon:"el-icon-full-screen"},{id:1,label:"原比例",value:"1:1",icon:"el-icon-full-screen"}],streamOptions:[{id:0,value:0,label:"主码流0",icon:"el-icon-full-screen"},{id:1,value:1,label:"子码流1",icon:"el-icon-full-screen"},{id:2,value:2,label:"子码流2",icon:"el-icon-full-screen"}],screenIcon:"vjs-icon-fullscreen-enter",sizeOptionInd:0,streamOptionInd:0,isShowRect:!0,isFullScreen:!1,isDrawImg:!0,wfsObj:null,isForceStop:!1,isCaptureOpen:!1,wsCapture:null,timer_capture:void 0,timer_draw:void 0,lastRecvDataTime:0,mjpeg_w:0,mjpeg_h:0,curImgInd:0,max_try_num:3}},created:function(){var e=window.localStorage.getItem("stream");this.streamOptionInd="0"===e?0:"1"===e?1:"2"===e?2:0,e=window.localStorage.getItem("size"),this.sizeOptionInd="1"===e?1:0,"false"===window.localStorage.getItem("showrect")?this.isShowRect=!1:this.isShowRect=!0,this.$nextTick((function(){this.resize_canvas()}))},mounted:function(){var e=this,t=this;c.a.isEnabled&&c.a.on("change",(function(){t.checkFull()})),window.onresize=function(){return function(){t.resize_canvas()}()},this.startMedia(),document.addEventListener("visibilitychange",(function(){e.wfsObj&&e.wfsObj.playerSeekNow()}))},destroyed:function(){this.stopMedia()},methods:{startMedia:function(){this.startPlay()},stopMedia:function(){this.isForceStop=!0,this.stop(),c.a.off("change",(function(){}))},startPlay:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=!1,n=0;case 2:if(!(n<e.max_try_num)){t.next=19;break}if(!r){t.next=5;break}return t.abrupt("break",19);case 5:return t.prev=5,t.next=8,e.changeStream(e.streamOptionInd+"",!1,!1);case 8:e.play(),r=!0,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](5),r=!1,n==e.max_try_num-1&&console.log("startPlay catch except: "+t.t0);case 16:n++,t.next=2;break;case 19:r||e.$message.error("网络请求码流失败");case 20:case"end":return t.stop()}}),t,null,[[5,12]])})))()},play:function(){var e=this;console.log("play ++");try{this.stop(),this.changeSizeOption(this.sizeOptionInd+"");var t=window.sessionStorage.getItem("token"),r=Number(this.streamOptionInd),n=document.getElementById("myVideo"),i=document.getElementById("myMjpeg"),o=n,a="H264Raw",u=void 0,c=this.streamOptions[r].value;1===c&&(o=i,a="MJPEG",u=this),s.a.isSupported()?(this.wfsObj=new s.a,this.wfsObj.attachMedia(o,"ch1",a,"ws/preview?token="+t,u),this.wfsObj.on(s.a.Events.ERROR,(function(t,r){return e.handleWfsEvent(t,r)}))):console.log("wfs is not supported")}catch(f){console.log("play catch except: "+f)}console.log("play --")},stop:function(){console.log("stop ++"),null!=this.wfsObj&&(this.wfsObj.destroy(),this.wfsObj=null),console.log("stop --")},changeSizeOption:function(e){this.sizeOptionInd=Number(e),1!=this.streamOptionInd&&(0===this.sizeOptionInd?document.getElementById("myVideo").style.setProperty("object-fit","fill","important"):document.getElementById("myVideo").style.setProperty("object-fit","contain","important"),console.log("old objectFit: ",document.getElementById("myVideo").style.objectFit)),window.localStorage.setItem("size",this.sizeOptionInd)},changeStream:function(e){var t=arguments,r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,o,a,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=!(t.length>1&&void 0!==t[1])||t[1],o=!(t.length>2&&void 0!==t[2])||t[2],a=Number(e),console.log("change stream to "+r.streamOptions[a].value),n.next=6,r.$http.post("preview/stream",{stream:r.streamOptions[a].value});case 6:if(s=n.sent,u=s.data,console.log("post stream return: ",u),u&&200===u.meta.status){n.next=11;break}return n.abrupt("return",r.$message.error("设置码流失败"));case 11:o&&(r.streamOptionInd=a,window.localStorage.setItem("stream",r.streamOptions[a].value)),i&&r.play();case 13:case"end":return n.stop()}}),n)})))()},changeShowRect:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,i,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=!(e.length>0&&void 0!==e[0])||e[0],!n){r.next=14;break}return console.log("show rect:"+!t.isShowRect),r.next=5,t.$http.post("preview/showrect",{showrect:!t.isShowRect});case 5:if(i=r.sent,o=i.data,console.log("post showrect return: ",o),200===o.meta.status){r.next=10;break}return r.abrupt("return",t.$message.error("设置画框失败"));case 10:t.isShowRect=!t.isShowRect,window.localStorage.setItem("showrect",t.isShowRect),r.next=22;break;case 14:return console.log("show rect:"+t.isShowRect),r.next=17,t.$http.post("preview/showrect",{showrect:t.isShowRect});case 17:if(a=r.sent,s=a.data,console.log("post showrect return: ",s),200===s.meta.status){r.next=22;break}return r.abrupt("return",t.$message.error("设置画框失败"));case 22:case"end":return r.stop()}}),r)})))()},doScreen:function(){var e=document.getElementsByClassName("preview_container")[0];this.isFullScreen?(c.a.exit(e),this.screenIcon="vjs-icon-fullscreen-enter"):(c.a.request(e),this.screenIcon="vjs-icon-fullscreen-exit"),this.isFullScreen=!this.isFullScreen},checkFull:function(){c.a.isFullscreen||(this.isFullScreen=!1,this.screenIcon="vjs-icon-fullscreen-enter")},scaleVideoTo16vs9:function(){var e=document.getElementById("myVideo");console.log("videoRatio:"+e.videoWidth+"/"+e.videoHeight)},handleWfsEvent:function(e,t){try{if(t.fatal){switch(console.warn("Fatal error :"+t.details),t.type){case s.a.ErrorTypes.MEDIA_ERROR:console.log("a media error occurred");break;case s.a.ErrorTypes.NETWORK_ERROR:console.log("a network error occurred");break;default:console.log("an unrecoverable error occurred");break}this.play()}}catch(r){console.log("handleWfsEvent catch except: "+r.description)}},startCapture:function(){var e=this;if(this.stopCatpure(),this.globalData.settings_capture_enable){var t=window.sessionStorage.getItem("token"),r="ws://"+window.location.host+"/ws/capture?token="+t,n="binary";this.wsCapture=new WebSocket(r,n),this.wsCapture.onopen=function(){e.isCaptureOpen=!0,console.log("ws capture connected")},this.wsCapture.onclose=function(t){e.isCaptureOpen=!1,console.log("ws capture disconnected",t)},this.wsCapture.onmessage=function(t){if("string"===typeof t.data)console.log("got a wscapture message: "+t.data);else{e.lastRecvDataTime=performance.now();var r=new FileReader;r.onload=function(t){if(t.target.readyState===FileReader.DONE){var r=t.target.result;e.captureImages[e.curImgInd].src=r,e.captureImages[e.curImgInd].date=e.getCurrentTime(),console.log("curImgInd: "+e.curImgInd+", "+e.captureImages[e.curImgInd].date),e.curImgInd=(e.curImgInd+1)%e.captureImages.length}},r.readAsDataURL(t.data)}},this.wsCapture.onerror=function(){e.isCaptureOpen=!1,console.log("ws capture occure error")}}},stopCatpure:function(){this.wsCapture&&(this.isCaptureOpen=!1,this.wsCapture.close(),this.wsCapture=null)},create_timer:function(e){var t=this;this.kill_timer(),console.log("create capture timer, timeout(s): "+e/1e3),this.lastRecvDataTime=performance.now(),this.timer_capture=setInterval((function(){if(t.lastRecvDataTime>0){var r=performance.now(),n=r-t.lastRecvDataTime;n>e&&(!t.isForceStop&&t.globalData.settings_capture_enable?(console.log("capture data not received in "+e/1e3+"s, start capture again..."),t.startCapture()):console.log("page destroyed or capture function is off"),t.lastRecvDataTime=r),t.wsCapture&&t.isCaptureOpen&&t.wsCapture.send("keep-alive")}}),3e3)},kill_timer:function(){clearInterval(this.timer_capture),this.timer_capture=void 0,console.log("capture timer killed")},resize_canvas:function(){var e=this,t=document.getElementById("myMjpeg");t&&(this.mjpeg_w=this.$refs.axMain.$el.offsetWidth,this.mjpeg_h=this.$refs.axMain.$el.offsetHeight,t.setAttribute("width",this.mjpeg_w),t.setAttribute("height",this.mjpeg_h),this.isDrawImg=!1,this.timer_draw&&clearInterval(this.timer_draw),this.timer_draw=setInterval((function(){e.isDrawImg=!0,clearInterval(e.timer_draw)}),300))},getObjectFitSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=1,a=0,s=0,u=n,c=i,f=0,l=0,d=t,h=r,p=t/r,v=n/i;return 0===e?v>=p?(o=r/i,a=(n-t/o)/2,u=t/o,c=i):(o=t/n,s=(i-r/o)/2,u=n,c=r/o):1===e&&(v>=p?(o=t/n,l=(r-i*o)/2,h=i*o):(o=r/i,f=(t-n*o)/2,d=n*o)),{sx:a,sy:s,swidth:u,sheight:c,x:f,y:l,width:d,height:h}},getCurrentTime:function(){var e=new Date,t=this.zeroFill(e.getMonth()+1),r=this.zeroFill(e.getDate()),n=this.zeroFill(e.getHours()),i=this.zeroFill(e.getMinutes()),o=this.zeroFill(e.getSeconds()),a=e.getMilliseconds();a<=9?a="00"+a:a<=99&&(a="0"+a);var s=e.getFullYear()+"-"+t+"-"+r+"_"+n+"-"+i+"-"+o+"."+a;return s},zeroFill:function(e){return e>=0&&e<=9?"0"+e:e}}},l=f,d=(r("39d8"),r("2877")),h=Object(d["a"])(l,n,i,!1,null,"c830df50",null);t["default"]=h.exports},e8b5:function(e,t,r){var n=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},e91f:function(e,t,r){"use strict";var n=r("ebb5"),i=r("4d64").indexOf,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},e9c4:function(e,t,r){var n=r("23e7"),i=r("da84"),o=r("d066"),a=r("2ba4"),s=r("e330"),u=r("d039"),c=i.Array,f=o("JSON","stringify"),l=s(/./.exec),d=s("".charAt),h=s("".charCodeAt),p=s("".replace),v=s(1..toString),y=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,m=/^[\uDC00-\uDFFF]$/,b=function(e,t,r){var n=d(r,t-1),i=d(r,t+1);return l(g,e)&&!l(m,i)||l(m,e)&&!l(g,n)?"\\u"+v(h(e,0),16):e},w=u((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")}));f&&n({target:"JSON",stat:!0,forced:w},{stringify:function(e,t,r){for(var n=0,i=arguments.length,o=c(i);n<i;n++)o[n]=arguments[n];var s=a(f,null,o);return"string"==typeof s?p(s,y,b):s}})},eac5:function(e,t,r){var n=r("861d"),i=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&i(e)===e}},ebb5:function(e,t,r){"use strict";var n,i,o,a=r("a981"),s=r("83ab"),u=r("da84"),c=r("1626"),f=r("861d"),l=r("1a2d"),d=r("f5df"),h=r("0d51"),p=r("9112"),v=r("6eeb"),y=r("9bf2").f,g=r("3a9b"),m=r("e163"),b=r("d2bb"),w=r("b622"),E=r("90e3"),_=u.Int8Array,A=_&&_.prototype,S=u.Uint8ClampedArray,T=S&&S.prototype,x=_&&m(_),R=A&&m(A),k=Object.prototype,O=u.TypeError,P=w("toStringTag"),I=E("TYPED_ARRAY_TAG"),L=E("TYPED_ARRAY_CONSTRUCTOR"),D=a&&!!b&&"Opera"!==d(u.opera),C=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},N=function(e){if(!f(e))return!1;var t=d(e);return"DataView"===t||l(F,t)||l(M,t)},U=function(e){if(!f(e))return!1;var t=d(e);return l(F,t)||l(M,t)},j=function(e){if(U(e))return e;throw O("Target is not a typed array")},B=function(e){if(c(e)&&(!b||g(x,e)))return e;throw O(h(e)+" is not a typed array constructor")},G=function(e,t,r){if(s){if(r)for(var n in F){var i=u[n];if(i&&l(i.prototype,e))try{delete i.prototype[e]}catch(o){}}R[e]&&!r||v(R,e,r?t:D&&A[e]||t)}},H=function(e,t,r){var n,i;if(s){if(b){if(r)for(n in F)if(i=u[n],i&&l(i,e))try{delete i[e]}catch(o){}if(x[e]&&!r)return;try{return v(x,e,r?t:D&&x[e]||t)}catch(o){}}for(n in F)i=u[n],!i||i[e]&&!r||v(i,e,t)}};for(n in F)i=u[n],o=i&&i.prototype,o?p(o,L,i):D=!1;for(n in M)i=u[n],o=i&&i.prototype,o&&p(o,L,i);if((!D||!c(x)||x===Function.prototype)&&(x=function(){throw O("Incorrect invocation")},D))for(n in F)u[n]&&b(u[n],x);if((!D||!R||R===k)&&(R=x.prototype,D))for(n in F)u[n]&&b(u[n].prototype,R);if(D&&m(T)!==R&&b(T,R),s&&!l(R,P))for(n in C=!0,y(R,P,{get:function(){return f(this)?this[I]:void 0}}),F)u[n]&&p(u[n],I,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:C&&I,aTypedArray:j,aTypedArrayConstructor:B,exportTypedArrayMethod:G,exportTypedArrayStaticMethod:H,isView:N,isTypedArray:U,TypedArray:x,TypedArrayPrototype:R}},f8cd:function(e,t,r){var n=r("da84"),i=r("5926"),o=n.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw o("The argument can't be less than 0");return t}},fb2c:function(e,t,r){var n=r("74e8");n("Uint32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},fb6a:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("e8b5"),a=r("68ee"),s=r("861d"),u=r("23cb"),c=r("07fa"),f=r("fc6a"),l=r("8418"),d=r("b622"),h=r("1dde"),p=r("f36a"),v=h("slice"),y=d("species"),g=i.Array,m=Math.max;n({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var r,n,i,d=f(this),h=c(d),v=u(e,h),b=u(void 0===t?h:t,h);if(o(d)&&(r=d.constructor,a(r)&&(r===g||o(r.prototype))?r=void 0:s(r)&&(r=r[y],null===r&&(r=void 0)),r===g||void 0===r))return p(d,v,b);for(n=new(void 0===r?g:r)(m(b-v,0)),i=0;v<b;v++,i++)v in d&&l(n,i,d[v]);return n.length=i,n}})},fce3:function(e,t,r){var n=r("d039"),i=r("da84"),o=i.RegExp;e.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fd87:function(e,t,r){var n=r("74e8");n("Int8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))}}]);