(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ax3"],{"109c":function(e,t,a){"use strict";a("24f1")},"24f1":function(e,t,a){},"27c5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setting"},[t("el-container",{staticClass:"seting-container"},[t("el-aside",{attrs:{width:"150px"}},[t("div",{staticClass:"left-container"},[t("el-menu",{staticClass:"setting_menu",attrs:{router:"","default-active":e.activePath,"background-color":"#4c4c4c","text-color":"#fff","active-text-color":"#ffd04b"}},[t("el-menu-item",{attrs:{index:"/setting/system"},on:{click:function(t){return e.saveNavState("/setting/system")}}},[t("i",{staticClass:"el-icon-setting"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("系统信息")])]),t("el-menu-item",{attrs:{index:"/setting/camera"},on:{click:function(t){return e.saveNavState("/setting/camera")}}},[t("i",{staticClass:"el-icon-camera"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("相机设置")])]),t("el-menu-item",{attrs:{index:"/setting/ai"},on:{click:function(t){return e.saveNavState("/setting/ai")}}},[t("i",{staticClass:"el-icon-s-help"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("智能设置")])]),t("el-menu-item",{attrs:{index:"/setting/video"},on:{click:function(t){return e.saveNavState("/setting/video")}}},[t("i",{staticClass:"el-icon-caret-right"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("视频设置")])]),t("el-menu-item",{attrs:{index:"/setting/storage"},on:{click:function(t){return e.saveNavState("/setting/storage")}}},[t("i",{staticClass:"el-icon-film"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("存储设置")])]),t("el-menu-item",{attrs:{index:"/setting/playback"},on:{click:function(t){return e.saveNavState("/setting/playback")}}},[t("i",{staticClass:"el-icon-video-play"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("录像回放")])])],1)],1)]),t("el-main",[t("router-view")],1)],1)],1)},l=[],o=(a("14d9"),{data(){return{activePath:"/setting/system"}},created(){var e=window.sessionStorage.getItem("settingActivePath");e&&(this.activePath=e),this.$router.path!==this.activePath&&this.$router.push(this.activePath)},methods:{saveNavState(e){window.sessionStorage.setItem("settingActivePath",e)}}}),i=o,s=(a("109c"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"7ac20460",null);t["default"]=n.exports},"39d6":function(e,t,a){},"47ab":function(e,t,a){"use strict";a("8ed6")},"4ae9":function(e,t,a){},"5b01":function(e,t,a){"use strict";a("4ae9")},"5f72":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"playback_container"},[t("el-main",{staticClass:"playback_view_left_container"},[t("el-container",{staticClass:"preview_container"},[t("el-main",{ref:"axMain",staticClass:"video_container"},[t("video",{staticClass:"axVideo",attrs:{id:"myVideo",controls:"control",muted:"",playsinline:"",oncontextmenu:"return false;"},domProps:{muted:!0}})])],1)],1),t("el-aside",{staticClass:"panel_container",attrs:{width:"350px"}},[t("div",{staticClass:"panel_view"},[t("p",{directives:[{name:"show",rawName:"v-show",value:0==e.play_list.length,expression:"play_list.length == 0"}],staticClass:"notice"},[e._v("未发现录像文件")]),t("div",{},[t("input",{staticStyle:{"margin-left":"10px"},attrs:{id:"chkAll",type:"checkbox"},on:{change:function(t){return e.selectAll()}}}),e._v("全选  "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.removeSelected()}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.downloadSelected()}}},[e._v("下载")])],1),e._l(e.play_list,(function(a,r){return t("div",{key:r,class:{record_normal:!a.focus,record_play:a.focus},attrs:{for:r}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.select,expression:"item.select"}],attrs:{type:"checkbox"},domProps:{value:a.name,checked:Array.isArray(a.select)?e._i(a.select,a.name)>-1:a.select},on:{change:function(t){var r=a.select,l=t.target,o=!!l.checked;if(Array.isArray(r)){var i=a.name,s=e._i(r,i);l.checked?s<0&&e.$set(a,"select",r.concat([i])):s>-1&&e.$set(a,"select",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"select",o)}}}),t("a",{on:{click:function(t){return e.play(r)}}},[e._v(e._s(a.name))]),e._v("  "),t("el-button",{staticClass:"download_btn",attrs:{type:"info",size:"mini"},on:{click:function(t){return e.download(r)}}},[e._v("下载")])],1)}))],2)])],1)},l=[],o=(a("14d9"),{data(){return{rec_threshold:17179869184,is_loaded:!1,is_loading:!1,play_list:[],cur_index:0,_fs:null}},created(){console.log("Playback++"),this.entry_record_files()},methods:{errorHandler(e){var t="An error occured(errcd): ";console.log(t+e.code)},entry_record_files(){var e=this;window.webkitRequestFileSystem(window.PERSISTENT,this.rec_threshold,(function(t){e._fs=t,t.root.getDirectory("ax_video",{create:!0},(function(a){var r=a.createReader();r.readEntries((function(a){if(e.play_list=[],a.length>0)for(var r=0;r<a.length;r++){var l=a[r];l.isFile&&t.root.getFile("ax_video/"+l.name,{},(function(t){t.createWriter((function(a){if(a.length>102400){var r=!1;e.is_loaded||(e.load_record_file(t.name),e.is_loaded=!0,r=!0),e.play_list.push({name:t.name,select:!1,focus:r})}else t.remove((function(){console.log(t.toURL()+" is removed")}))}),e.errorHandler)}),e.errorHandler)}}),e.errorHandler)}),e.errorHandler)}))},load_record_file(e,t=!1){if(null==this._fs)return;var a=this;const r=document.getElementById("myVideo");r.pause(),r.currentTime=0,r.src=null,this._fs.root.getFile("ax_video/"+e,{},(function(e){e.file((function(e){r.src=window.URL.createObjectURL(e),t&&(r.play(),a.is_loading=!1)}))}),this.errorHandler)},play(e){if(!this.is_loading&&e!=this.cur_index&&e<this.play_list.length){for(var t=0;t<this.play_list.length;t++)this.play_list[t].focus=e==t;this.is_loading=!0,this.cur_index=e,this.load_record_file(this.play_list[e].name,!0)}},download(e){var t=this;e<this.play_list.length&&this._fs.root.getFile("ax_video/"+this.play_list[e].name,{},(function(a){a.file((function(a){var r=window.URL.createObjectURL(a),l=document.createElement("a");l.style.display="none",l.href=r,l.download=t.play_list[e].name,l.dispatchEvent(new MouseEvent("click"))}))}),this.errorHandler)},removeSelected(){var e=[];for(var t of this.play_list)t.select&&e.push(t.name);if(0!=e.length&&1==confirm("确定要删除文件吗？")){var a=this;this.is_loaded=!1,this.is_loading=!1,this.cur_index=0;const t=document.getElementById("myVideo");for(var r of(t.pause(),t.currentTime=0,t.src=null,e))this._fs.root.getFile("ax_video/"+r,{},(function(e){e.remove((function(){console.log(e.toURL()+" is removed")}))}),a.errorHandler);this.entry_record_files()}},downloadSelected(){for(var e=this,t=0,a=0;a<this.play_list.length;a++)if(this.play_list[a].select){let r=a;setTimeout(()=>{e.download(r)},300*++t)}},selectAll(){const e=document.getElementById("chkAll");for(var t of this.play_list)t.select=!!e.checked}}}),i=o,s=(a("47ab"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"4de65584",null);t["default"]=n.exports},"6fbb":function(e,t,a){"use strict";a("ba80")},"83a6":function(e,t,a){},"868b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formCameraRef",attrs:{rules:e.formCameraRules,model:e.formCamera,"label-width":"220px"}},[t("el-form-item",{attrs:{label:"工作模式:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.sns_work_mode,callback:function(t){e.$set(e.formCamera.camera_attr,"sns_work_mode",t)},expression:"formCamera.camera_attr.sns_work_mode"}},e._l(e.sns_mode_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"旋转:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.rotation,callback:function(t){e.$set(e.formCamera.camera_attr,"rotation",t)},expression:"formCamera.camera_attr.rotation"}},e._l(e.rotation_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form",{attrs:{"label-width":"220px"}},[t("el-row",[t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"镜像:"}},[t("el-switch",{model:{value:e.formCamera.camera_attr.mirror,callback:function(t){e.$set(e.formCamera.camera_attr,"mirror",t)},expression:"formCamera.camera_attr.mirror"}})],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"翻转:"}},[t("el-switch",{model:{value:e.formCamera.camera_attr.flip,callback:function(t){e.$set(e.formCamera.camera_attr,"flip",t)},expression:"formCamera.camera_attr.flip"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"日夜模式:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.daynight,callback:function(t){e.$set(e.formCamera.camera_attr,"daynight",t)},expression:"formCamera.camera_attr.daynight"}},e._l(e.daynight_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"开启NR:"}},[t("el-switch",{model:{value:e.formCamera.camera_attr.nr_mode,callback:function(t){e.$set(e.formCamera.camera_attr,"nr_mode",t)},expression:"formCamera.camera_attr.nr_mode"}})],1),t("el-form-item",{attrs:{label:"开启EIS:"}},[t("el-switch",{attrs:{disabled:!e.formCamera.camera_attr.eis_support},model:{value:e.formCamera.camera_attr.eis,callback:function(t){e.$set(e.formCamera.camera_attr,"eis",t)},expression:"formCamera.camera_attr.eis"}})],1),t("el-form-item",{attrs:{label:"加载非BIAS模型:"}},[t("el-switch",{attrs:{disabled:!e.formCamera.camera_attr.nonebias_support},model:{value:e.formCamera.camera_attr.nonebias,callback:function(t){e.$set(e.formCamera.camera_attr,"nonebias",t)},expression:"formCamera.camera_attr.nonebias"}})],1),t("el-form-item",{attrs:{label:"相机帧率:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.framerate,callback:function(t){e.$set(e.formCamera.camera_attr,"framerate",t)},expression:"formCamera.camera_attr.framerate"}},e._l(e.framerate_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)},l=[],o=(a("14d9"),{data(){return{sns_mode_options:[{label:"SDR",value:0},{label:"HDR",value:1}],rotation_options:[{label:"0°",value:0},{label:"90°",value:1},{label:"180°",value:2},{label:"270°",value:3}],daynight_options:[{label:"日间模式",value:0},{label:"夜间模式",value:1}],framerate_options:[{label:"25",value:25},{label:"30",value:30}],formCamera:{camera_attr:{sns_work_mode:0,rotation:0,mirror:!1,flip:!1,framerate:25,daynight:0,nr_mode:!0,eis_support:!1,eis:!1,nonebias:!1,nonebias_support:!1},framerate_opts:[25,30]},formCameraRules:{}}},created(){console.log("camera++"),this.getInfo()},methods:{onSubmit(){this.$refs.formCameraRef.validate(async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/camera",this.formCamera);console.log("camera get return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}})},async getInfo(){try{const{data:t}=await this.$http.get("setting/camera");if(console.log("camera get return: ",t),200===t.meta.status){this.formCamera.camera_attr.sns_work_mode=t.data.camera_attr.sns_work_mode,this.formCamera.camera_attr.rotation=t.data.camera_attr.rotation,this.formCamera.camera_attr.mirror=t.data.camera_attr.mirror,this.formCamera.camera_attr.flip=t.data.camera_attr.flip,this.formCamera.camera_attr.daynight=t.data.camera_attr.daynight,this.formCamera.camera_attr.framerate=t.data.camera_attr.framerate,this.formCamera.camera_attr.nr_mode=t.data.camera_attr.nr_mode,this.formCamera.camera_attr.eis_support=t.data.camera_attr.eis_support,this.formCamera.camera_attr.eis=t.data.camera_attr.eis,this.formCamera.camera_attr.nonebias=t.data.camera_attr.nonebias,this.formCamera.camera_attr.nonebias_support=t.data.camera_attr.nonebias_support,this.formCamera.framerate_opts=t.data.framerate_opts;var e=[];for(let t=0;t<this.formCamera.framerate_opts.length;t++)e.push({lable:""+this.formCamera.framerate_opts[t],value:this.formCamera.framerate_opts[t]});this.framerate_options=e}}catch(t){this.$message.error("获取信息失败")}}}}),i=o,s=(a("a985"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"30b8f84b",null);t["default"]=n.exports},"8e63":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"overlay-preview-container"}),t("div",[t("el-form",{ref:"formOverlayRef",attrs:{rules:e.formOverlayRules,model:e.formOverlay,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"视频源ID"}},[t("el-select",{on:{change:e.onChangeSrcID},model:{value:e.formOverlay.video_src_info.id,callback:function(t){e.$set(e.formOverlay.video_src_info,"id",t)},expression:"formOverlay.video_src_info.id"}},e._l(e.formOverlay.video_src_opts,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"画线"}},[t("el-switch",{model:{value:e.formOverlay.drawLine.enable,callback:function(t){e.$set(e.formOverlay.drawLine,"enable",t)},expression:"formOverlay.drawLine.enable"}})],1),t("el-form-item",{attrs:{label:"","label-width":"20px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"x1:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawLine.enable},model:{value:e.formOverlay.drawLine.ptBegin[0],callback:function(t){e.$set(e.formOverlay.drawLine.ptBegin,0,t)},expression:"formOverlay.drawLine.ptBegin[0]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y1:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawLine.enable},model:{value:e.formOverlay.drawLine.ptBegin[1],callback:function(t){e.$set(e.formOverlay.drawLine.ptBegin,1,t)},expression:"formOverlay.drawLine.ptBegin[1]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"x2:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawLine.enable},model:{value:e.formOverlay.drawLine.ptEnd[0],callback:function(t){e.$set(e.formOverlay.drawLine.ptEnd,0,t)},expression:"formOverlay.drawLine.ptEnd[0]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y2:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawLine.enable},model:{value:e.formOverlay.drawLine.ptEnd[1],callback:function(t){e.$set(e.formOverlay.drawLine.ptEnd,1,t)},expression:"formOverlay.drawLine.ptEnd[1]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"线宽:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:2,max:16,disabled:!e.formOverlay.drawLine.enable},model:{value:e.formOverlay.drawLine.lineWidth,callback:function(t){e.$set(e.formOverlay.drawLine,"lineWidth",t)},expression:"formOverlay.drawLine.lineWidth"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"颜色:"}},[t("el-select",{attrs:{disabled:!e.formOverlay.drawLine.enable},model:{value:e.formOverlay.drawLine.color,callback:function(t){e.$set(e.formOverlay.drawLine,"color",t)},expression:"formOverlay.drawLine.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{attrs:{label:"画矩形框"}},[t("el-switch",{model:{value:e.formOverlay.drawRect.enable,callback:function(t){e.$set(e.formOverlay.drawRect,"enable",t)},expression:"formOverlay.drawRect.enable"}})],1),t("el-form-item",{attrs:{label:"","label-width":"20px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"x:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.x,callback:function(t){e.$set(e.formOverlay.drawRect,"x",t)},expression:"formOverlay.drawRect.x"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.y,callback:function(t){e.$set(e.formOverlay.drawRect,"y",t)},expression:"formOverlay.drawRect.y"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"宽:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:8,max:256,disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.w,callback:function(t){e.$set(e.formOverlay.drawRect,"w",t)},expression:"formOverlay.drawRect.w"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"高:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:8,max:256,disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.h,callback:function(t){e.$set(e.formOverlay.drawRect,"h",t)},expression:"formOverlay.drawRect.h"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"线宽:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:2,max:16,disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.lineWidth,callback:function(t){e.$set(e.formOverlay.drawRect,"lineWidth",t)},expression:"formOverlay.drawRect.lineWidth"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"颜色:"}},[t("el-select",{attrs:{disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.color,callback:function(t){e.$set(e.formOverlay.drawRect,"color",t)},expression:"formOverlay.drawRect.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{staticClass:"inline",attrs:{label:"填充:"}},[t("el-switch",{attrs:{disabled:!e.formOverlay.drawRect.enable},model:{value:e.formOverlay.drawRect.solid,callback:function(t){e.$set(e.formOverlay.drawRect,"solid",t)},expression:"formOverlay.drawRect.solid"}})],1)],1),t("el-form-item",{attrs:{label:"画凸四边形"}},[t("el-switch",{model:{value:e.formOverlay.drawPolygon.enable,callback:function(t){e.$set(e.formOverlay.drawPolygon,"enable",t)},expression:"formOverlay.drawPolygon.enable"}})],1),t("el-form-item",{attrs:{label:"","label-width":"20px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"x1:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt0[0],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt0,0,t)},expression:"formOverlay.drawPolygon.pt0[0]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y1:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt0[1],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt0,1,t)},expression:"formOverlay.drawPolygon.pt0[1]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"x2:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt1[0],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt1,0,t)},expression:"formOverlay.drawPolygon.pt1[0]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y2:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt1[1],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt1,1,t)},expression:"formOverlay.drawPolygon.pt1[1]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"x3:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt2[0],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt2,0,t)},expression:"formOverlay.drawPolygon.pt2[0]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y3:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt2[1],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt2,1,t)},expression:"formOverlay.drawPolygon.pt2[1]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"x4:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt3[0],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt3,0,t)},expression:"formOverlay.drawPolygon.pt3[0]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y4:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.pt3[1],callback:function(t){e.$set(e.formOverlay.drawPolygon.pt3,1,t)},expression:"formOverlay.drawPolygon.pt3[1]"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"线宽:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:2,max:16,disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.lineWidth,callback:function(t){e.$set(e.formOverlay.drawPolygon,"lineWidth",t)},expression:"formOverlay.drawPolygon.lineWidth"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"颜色:"}},[t("el-select",{attrs:{disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.color,callback:function(t){e.$set(e.formOverlay.drawPolygon,"color",t)},expression:"formOverlay.drawPolygon.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{staticClass:"inline",attrs:{label:"填充:"}},[t("el-switch",{attrs:{disabled:!e.formOverlay.drawPolygon.enable},model:{value:e.formOverlay.drawPolygon.solid,callback:function(t){e.$set(e.formOverlay.drawPolygon,"solid",t)},expression:"formOverlay.drawPolygon.solid"}})],1)],1),t("el-form-item",{attrs:{label:"画马赛克"}},[t("el-switch",{model:{value:e.formOverlay.drawMosaic.enable,callback:function(t){e.$set(e.formOverlay.drawMosaic,"enable",t)},expression:"formOverlay.drawMosaic.enable"}})],1),t("el-form-item",{attrs:{label:"","label-width":"20px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"x:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1919,disabled:!e.formOverlay.drawMosaic.enable},model:{value:e.formOverlay.drawMosaic.x,callback:function(t){e.$set(e.formOverlay.drawMosaic,"x",t)},expression:"formOverlay.drawMosaic.x"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"y:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:1087,disabled:!e.formOverlay.drawMosaic.enable},model:{value:e.formOverlay.drawMosaic.y,callback:function(t){e.$set(e.formOverlay.drawMosaic,"y",t)},expression:"formOverlay.drawMosaic.y"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"宽:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:8,max:256,disabled:!e.formOverlay.drawMosaic.enable},model:{value:e.formOverlay.drawMosaic.w,callback:function(t){e.$set(e.formOverlay.drawMosaic,"w",t)},expression:"formOverlay.drawMosaic.w"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"高:"}},[t("el-input-number",{attrs:{"controls-position":"right",min:8,max:256,disabled:!e.formOverlay.drawMosaic.enable},model:{value:e.formOverlay.drawMosaic.h,callback:function(t){e.$set(e.formOverlay.drawMosaic,"h",t)},expression:"formOverlay.drawMosaic.h"}})],1),t("el-form-item",{staticClass:"inline",attrs:{label:"块:"}},[t("el-select",{attrs:{disabled:!e.formOverlay.drawMosaic.enable},model:{value:e.formOverlay.drawMosaic.blockSize,callback:function(t){e.$set(e.formOverlay.drawMosaic,"blockSize",t)},expression:"formOverlay.drawMosaic.blockSize"}},e._l(e.blockOptions,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("el-form-item",{attrs:{label:"旋转"}},[t("el-switch",{model:{value:e.formOverlay.rotation.enable,callback:function(t){e.$set(e.formOverlay.rotation,"enable",t)},expression:"formOverlay.rotation.enable"}})],1),t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{disabled:!e.formOverlay.rotation.enable},model:{value:e.formOverlay.rotation.rotation,callback:function(t){e.$set(e.formOverlay.rotation,"rotation",t)},expression:"formOverlay.rotation.rotation"}},e._l(e.rotationOptions,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)])},l=[],o={data(){return{blockOptions:[8,16,64],rotationOptions:[0,90,180,270],colorOptions:[{label:"Green",value:"0x000000"},{label:"Red",value:"0x0000FF"},{label:"Blue",value:"0x00FF00"},{label:"Purple",value:"0x00FFFF"},{label:"Yellow",value:"0xFF00FF"},{label:"Black",value:"0x008080"},{label:"White",value:"0xFF8080"},{label:"Gray",value:"0x808080"}],formOverlay:{video_src_opts:[{label:"视频源0",value:0},{label:"视频源1",value:1}],video_src_info:{id:0},drawLine:{enable:!1,ptBegin:[0,0],ptEnd:[0,0],color:"0xFF8080",lineWidth:2},drawRect:{enable:!1,x:0,y:0,w:0,h:0,solid:!0,color:"0xFF8080",lineWidth:2},drawPolygon:{enable:!1,pt0:[0,0],pt1:[0,0],pt2:[0,0],pt3:[0,0],solid:!0,color:"0xFF8080",lineWidth:2},drawMosaic:{enable:!1,x:0,y:0,w:0,h:0,blockSize:8},rotation:{enable:!1,rotation:90}},formOverlayRules:{}}},created(){console.log("overlay++"),this.getInfo()},methods:{async onSubmit(){try{var e="setting/overlay_"+this.formOverlay.video_src_info.id;const{data:t}=await this.$http.post(e,this.formOverlay);console.log("overlay get return: ",t),200===t.meta.status?this.$message.success("修改成功"):this.$message.success("修改失败")}catch(t){this.$message.error("修改失败")}},async getInfo(){try{var e="setting/overlay_"+this.formOverlay.video_src_info.id;const{data:t}=await this.$http.get(e);console.log("overlay get return: ",t),200===t.meta.status&&(this.formOverlay.drawLine=t.data.drawLine,this.formOverlay.drawRect=t.data.drawRect,this.formOverlay.drawPolygon=t.data.drawPolygon,this.formOverlay.drawMosaic=t.data.drawMosaic,this.formOverlay.rotation=t.data.rotation)}catch(t){this.$message.error("获取信息失败")}},onChangeSrcID(e){this.getInfo()}}},i=o,s=(a("ac3f"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"566346ec",null);t["default"]=n.exports},"8ed6":function(e,t,a){},"962c":function(e,t,a){"use strict";a("39d6")},a8bc:function(e,t,a){"use strict";a("83a6")},a985:function(e,t,a){"use strict";a("f50c")},ac3f:function(e,t,a){"use strict";a("c846")},ba80:function(e,t,a){},c846:function(e,t,a){},cb93:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"storage-container"},[t("el-form",{ref:"formStorageRef",attrs:{rules:e.formStorageRules,model:e.formStorage,"label-position":"left","label-width":"180px"}},[t("el-form-item",{attrs:{label:"【板端存储策略】"}}),t("el-form-item",{staticClass:"storage-item",attrs:{label:"启用板端存储"}},[t("el-switch",{model:{value:e.formStorage.storage.rec_actived,callback:function(t){e.$set(e.formStorage.storage,"rec_actived",t)},expression:"formStorage.storage.rec_actived"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"启用循环覆盖"}},[t("el-switch",{attrs:{disabled:!e.formStorage.storage.rec_actived},model:{value:e.formStorage.storage.rec_loop_cover,callback:function(t){e.$set(e.formStorage.storage,"rec_loop_cover",t)},expression:"formStorage.storage.rec_loop_cover"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"录像文件总空间(MB)"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{readonly:!0,disabled:!e.formStorage.storage.rec_actived},model:{value:e.formStorage.storage.rec_total,callback:function(t){e.$set(e.formStorage.storage,"rec_total",t)},expression:"formStorage.storage.rec_total"}})],1)],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"单个录像文件阈值(MB)",prop:"storage.rec_threshold"}},[t("el-input-number",{attrs:{min:16,max:1024,step:64,disabled:!e.formStorage.storage.rec_actived,"controls-position":"right",placeholder:"文件阈值"},model:{value:e.formStorage.storage.rec_threshold,callback:function(t){e.$set(e.formStorage.storage,"rec_threshold",t)},expression:"formStorage.storage.rec_threshold"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"录像文件数上限(个)",prop:"storage.rec_max_count"}},[t("el-input-number",{attrs:{min:1,max:100,step:10,disabled:!e.formStorage.storage.rec_actived,"controls-position":"right",placeholder:"文件数上限"},model:{value:e.formStorage.storage.rec_max_count,callback:function(t){e.$set(e.formStorage.storage,"rec_max_count",t)},expression:"formStorage.storage.rec_max_count"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"存储路径",prop:"storage.rec_path"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{readonly:!0,placeholder:"板端存储路径"},model:{value:e.formStorage.storage.rec_path,callback:function(t){e.$set(e.formStorage.storage,"rec_path",t)},expression:"formStorage.storage.rec_path"}})],1)],1),t("p",{staticStyle:{color:"indianred","margin-left":"60px"}},[e._v("注：单个录像文件阈值(MB) x 录像文件数上限(个)，须小于录像文件总空间(MB)")]),t("el-form-item",{attrs:{label:"【前端存储策略】"}}),t("el-form-item",{staticClass:"storage-item",attrs:{label:"单个录像文件阈值(MB)",prop:"rec_threshold_web"}},[t("el-input-number",{attrs:{min:16,max:1024,step:64,"controls-position":"right",placeholder:"文件阈值"},model:{value:e.formStorage.rec_threshold_web,callback:function(t){e.$set(e.formStorage,"rec_threshold_web",t)},expression:"formStorage.rec_threshold_web"}})],1),t("p",{staticStyle:{color:"indianred","margin-left":"60px"}},[e._v("注：录像回放仅涉及前端录像，下载录像时固定下载到当前用户的Downloads目录下")]),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)},l=[],o=(a("d9e2"),{data(){const e=(e,t,a)=>{if(t.length>64)a(new Error);else{var r=/^\/(\w+\/?)+$/;r.test(t)||a(new Error)}a()};return{formStorage:{storage:{rec_actived:!0,rec_loop_cover:!0,rec_total:2560,rec_threshold:256,rec_max_count:10,rec_path:"/mnt/sdcard/"},rec_threshold_web:1024},formStorageRules:{"storage.rec_threshold":[{type:"integer",required:!0,message:"请输入板端录像文件阈值",trigger:"blur"}],"storage.rec_max_count":[{type:"integer",required:!0,message:"请输入板端录像文件数上限",trigger:"blur"}],"storage.rec_path":[{type:"string",required:!0,message:"请输入板端存储路径",trigger:"blur"},{required:!0,validator:e,message:"板端存储路径长度超过64位，或路径无效(要求Linux目录格式，如：'/mnt/sdcard/')",trigger:"blur"}],rec_threshold_web:[{type:"integer",required:!0,message:"请输入前端录像文件阈值",trigger:"blur"}]}}},created(){console.log("storage++"),this.getInfo()},methods:{async onSubmit(){try{let e=this.formStorage.storage.rec_threshold,t=this.formStorage.storage.rec_max_count;if(e*t>this.formStorage.storage.rec_total)return void this.$message.error("单个录像文件阈值 x 录像文件数上限, 超过板端总录像空间！");const{data:a}=await this.$http.post("setting/storage",this.formStorage);console.log("storage set return: ",a),200===a.meta.status?this.$message.success("修改成功"):404===a.meta.status?this.$message.error("板端存储路径创建失败"):this.$message.error("修改失败"),window.localStorage.setItem("rec_threshold_web",this.formStorage.rec_threshold_web)}catch(e){this.$message.error("修改失败")}},async getInfo(){try{const{data:t}=await this.$http.get("setting/storage");console.log("storage get return: ",t),200===t.meta.status&&(this.formStorage.storage=t.data.storage,0===this.formStorage.storage.rec_total&&(this.formStorage.storage.rec_total=2560));var e=window.localStorage.getItem("rec_threshold_web");void 0!=e&&(this.formStorage.rec_threshold_web=e)}catch(t){this.$message.error("获取信息失败")}}}}),i=o,s=(a("a8bc"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"66d85307",null);t["default"]=n.exports},cf04:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1),t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"智能选项",name:"options"}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"100px","label-position":"left",size:"medium"}},[t("el-form-item",{attrs:{label:"智能开启:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.ai_enable,callback:function(t){e.$set(e.formAi.ai_attr,"ai_enable",t)},expression:"formAi.ai_attr.ai_enable"}})],1),t("el-form-item",{attrs:{label:"智能模式:"}},[t("el-select",{attrs:{disabled:!0},model:{value:e.formAi.ai_attr.detect_model,callback:function(t){e.$set(e.formAi.ai_attr,"detect_model",t)},expression:"formAi.ai_attr.detect_model"}},e._l(e.detect_modes,(function(a){return t("el-option",{key:a.label,attrs:{label:e.formAi.ai_attr.detect_only?a.label+"（无推图）":a.label,value:a.value}})})),1)],1),t("el-form-item",{attrs:{label:"检测帧率:"}},[t("el-select",{model:{value:e.formAi.ai_attr.detect_fps,callback:function(t){e.$set(e.formAi.ai_attr,"detect_fps",t)},expression:"formAi.ai_attr.detect_fps"}},e._l(Array.from({length:15},(e,t)=>t+1),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"推图策略:"}},[t("el-select",{model:{value:e.formAi.ai_attr.push_strategy.push_mode,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_mode",t)},expression:"formAi.ai_attr.push_strategy.push_mode"}},e._l(e.push_strategy_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"FAST"==e.formAi.ai_attr.push_strategy.push_mode||"INTERVAL"==e.formAi.ai_attr.push_strategy.push_mode,expression:"formAi.ai_attr.push_strategy.push_mode == 'FAST' || formAi.ai_attr.push_strategy.push_mode == 'INTERVAL'"}],attrs:{label:""}},[t("el-form-item",{attrs:{label:"间隔时间(ms)"}},[t("el-select",{model:{value:e.formAi.ai_attr.push_strategy.push_interval,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_interval",t)},expression:"formAi.ai_attr.push_strategy.push_interval"}},e._l(e.push_interval_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"FAST"==e.formAi.ai_attr.push_strategy.push_mode||"INTERVAL"==e.formAi.ai_attr.push_strategy.push_mode,expression:"formAi.ai_attr.push_strategy.push_mode == 'FAST' || formAi.ai_attr.push_strategy.push_mode == 'INTERVAL'"}],attrs:{label:""}},[t("el-form-item",{attrs:{label:"推图数量"}},[t("el-select",{model:{value:e.formAi.ai_attr.push_strategy.push_count,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_count",t)},expression:"formAi.ai_attr.push_strategy.push_count"}},e._l(Array.from({length:5},(e,t)=>t+1),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1)],1),t("el-form-item",{attrs:{label:"同帧推图:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.push_strategy.push_same_frame,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_same_frame",t)},expression:"formAi.ai_attr.push_strategy.push_same_frame"}})],1)],1)],1),t("el-tab-pane",{attrs:{label:"脸人配置",name:"facehuman",disabled:"hvcfp"==e.formAi.ai_attr.detect_model}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"100px","label-position":"left",size:"medium"}},[t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"人脸检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.facehuman.face_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.facehuman.face_detect,"enable",t)},expression:"formAi.ai_attr.facehuman.face_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"人脸画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.facehuman.face_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.facehuman.face_detect,"draw_rect",t)},expression:"formAi.ai_attr.facehuman.face_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"人形检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.facehuman.body_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.facehuman.body_detect,"enable",t)},expression:"formAi.ai_attr.facehuman.body_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"人形画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.facehuman.body_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.facehuman.body_detect,"draw_rect",t)},expression:"formAi.ai_attr.facehuman.body_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"人脸识别:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.facehuman.face_identify.enable,callback:function(t){e.$set(e.formAi.ai_attr.facehuman.face_identify,"enable",t)},expression:"formAi.ai_attr.facehuman.face_identify.enable"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"结构化配置",name:"hvcfp",disabled:"facehuman"==e.formAi.ai_attr.detect_model}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"100px","label-position":"left",size:"medium"}},[t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"人脸检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.face_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.face_detect,"enable",t)},expression:"formAi.ai_attr.hvcfp.face_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"人脸画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.face_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.face_detect,"draw_rect",t)},expression:"formAi.ai_attr.hvcfp.face_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"人形检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.body_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.body_detect,"enable",t)},expression:"formAi.ai_attr.hvcfp.body_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"人形画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.body_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.body_detect,"draw_rect",t)},expression:"formAi.ai_attr.hvcfp.body_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"机动车检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.vechicle_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.vechicle_detect,"enable",t)},expression:"formAi.ai_attr.hvcfp.vechicle_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"机动车画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.vechicle_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.vechicle_detect,"draw_rect",t)},expression:"formAi.ai_attr.hvcfp.vechicle_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"非机动车检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.cycle_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.cycle_detect,"enable",t)},expression:"formAi.ai_attr.hvcfp.cycle_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"非机动车画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.cycle_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.cycle_detect,"draw_rect",t)},expression:"formAi.ai_attr.hvcfp.cycle_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"车牌检测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.plate_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.plate_detect,"enable",t)},expression:"formAi.ai_attr.hvcfp.plate_detect.enable"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"车牌画框:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.plate_detect.draw_rect,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.plate_detect,"draw_rect",t)},expression:"formAi.ai_attr.hvcfp.plate_detect.draw_rect"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.formAi.ai_attr.detect_only,expression:"formAi.ai_attr.detect_only == false"}],attrs:{label:"车牌识别:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.hvcfp.plate_identify.enable,callback:function(t){e.$set(e.formAi.ai_attr.hvcfp.plate_identify,"enable",t)},expression:"formAi.ai_attr.hvcfp.plate_identify.enable"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"事件上报",name:"events"}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"100px","label-position":"left",size:"medium"}},[t("el-form-item",{attrs:{label:"移动侦测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.events.motion_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.events.motion_detect,"enable",t)},expression:"formAi.ai_attr.events.motion_detect.enable"}}),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.motion_detect.enable,expression:"formAi.ai_attr.events.motion_detect.enable"}],attrs:{label:"Y阈值(1-255)"}},[t("el-slider",{attrs:{min:1,max:255,"show-input":""},model:{value:e.formAi.ai_attr.events.motion_detect.threshold_y,callback:function(t){e.$set(e.formAi.ai_attr.events.motion_detect,"threshold_y",t)},expression:"formAi.ai_attr.events.motion_detect.threshold_y"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.motion_detect.enable,expression:"formAi.ai_attr.events.motion_detect.enable"}],attrs:{label:"置信度(1-100)"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.motion_detect.confidence,callback:function(t){e.$set(e.formAi.ai_attr.events.motion_detect,"confidence",t)},expression:"formAi.ai_attr.events.motion_detect.confidence"}})],1)],1),t("el-form-item",{attrs:{label:"遮挡侦测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.events.occlusion_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.events.occlusion_detect,"enable",t)},expression:"formAi.ai_attr.events.occlusion_detect.enable"}}),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.occlusion_detect.enable,expression:"formAi.ai_attr.events.occlusion_detect.enable"}],attrs:{label:"Y阈值(1-255)"}},[t("el-slider",{attrs:{min:1,max:255,"show-input":""},model:{value:e.formAi.ai_attr.events.occlusion_detect.threshold_y,callback:function(t){e.$set(e.formAi.ai_attr.events.occlusion_detect,"threshold_y",t)},expression:"formAi.ai_attr.events.occlusion_detect.threshold_y"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.occlusion_detect.enable,expression:"formAi.ai_attr.events.occlusion_detect.enable"}],attrs:{label:"置信度(1-100)"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.occlusion_detect.confidence,callback:function(t){e.$set(e.formAi.ai_attr.events.occlusion_detect,"confidence",t)},expression:"formAi.ai_attr.events.occlusion_detect.confidence"}})],1)],1),t("el-form-item",{attrs:{label:"场景切换:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.events.scene_change_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.events.scene_change_detect,"enable",t)},expression:"formAi.ai_attr.events.scene_change_detect.enable"}}),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.scene_change_detect.enable,expression:"formAi.ai_attr.events.scene_change_detect.enable"}],attrs:{label:"阈值(1-100)"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.scene_change_detect.threshold_y,callback:function(t){e.$set(e.formAi.ai_attr.events.scene_change_detect,"threshold_y",t)},expression:"formAi.ai_attr.events.scene_change_detect.threshold_y"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.scene_change_detect.enable,expression:"formAi.ai_attr.events.scene_change_detect.enable"}],attrs:{label:"置信度(1-100)"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.scene_change_detect.confidence,callback:function(t){e.$set(e.formAi.ai_attr.events.scene_change_detect,"confidence",t)},expression:"formAi.ai_attr.events.scene_change_detect.confidence"}})],1)],1)],1)],1)],1)],1)},l=[],o={data(){return{activeName:"options",detect_modes:[{label:"脸人模式",value:"facehuman"},{label:"结构化模式",value:"hvcfp"}],push_strategy_options:[{label:"最快推图",value:"FAST"},{label:"间隔推图",value:"INTERVAL"},{label:"最优推图",value:"BEST_FRAME"}],push_interval_options:[{label:"1000",value:1e3},{label:"2000",value:2e3},{label:"3000",value:3e3},{label:"5000",value:5e3},{label:"10000",value:1e4},{label:"20000",value:2e4}],formAi:{ai_attr:{ai_enable:!0,detect_model:"hvcfp",detect_fps:15,push_strategy:{push_mode:"FAST",push_interval:2e3,push_count:1,push_same_frame:!0},detect_only:!1,facehuman:{face_detect:{enable:!0,draw_rect:!0},body_detect:{enable:!0,draw_rect:!0},face_identify:{enable:!0}},hvcfp:{face_detect:{enable:!0,draw_rect:!0},body_detect:{enable:!0,draw_rect:!0},vechicle_detect:{enable:!0,draw_rect:!0},cycle_detect:{enable:!0,draw_rect:!0},plate_detect:{enable:!0,draw_rect:!0},plate_identify:{enable:!0}},events:{motion_detect:{enable:!0,threshold_y:50,confidence:80},occlusion_detect:{enable:!0,threshold_y:100,confidence:80},scene_change_detect:{enable:!1,threshold_y:60,confidence:60}}}},formAiRules:{}}},created(){console.log("ai++"),this.getInfo()},methods:{handleClick(e,t){},onSubmit(){this.$refs.formAiRef.validate(async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/ai",this.formAi);console.log("ai post return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}})},async getInfo(){try{const{data:e}=await this.$http.get("setting/ai");console.log("ai get return: ",e),200===e.meta.status&&(this.formAi.ai_attr.ai_enable=e.data.ai_attr.ai_enable,this.formAi.ai_attr.detect_model=e.data.ai_attr.detect_model,this.formAi.ai_attr.detect_fps=e.data.ai_attr.detect_fps,this.formAi.ai_attr.push_strategy.push_mode=e.data.ai_attr.push_strategy.push_mode,this.formAi.ai_attr.push_strategy.push_interval=e.data.ai_attr.push_strategy.push_interval,this.formAi.ai_attr.push_strategy.push_count=e.data.ai_attr.push_strategy.push_count,this.formAi.ai_attr.push_strategy.push_same_frame=e.data.ai_attr.push_strategy.push_same_frame,this.formAi.ai_attr.detect_only=e.data.ai_attr.detect_only,"facehuman"===this.formAi.ai_attr.detect_model?(this.formAi.ai_attr.facehuman.face_detect.enable=e.data.ai_attr.facehuman.face_detect.enable,this.formAi.ai_attr.facehuman.face_detect.draw_rect=e.data.ai_attr.facehuman.face_detect.draw_rect,this.formAi.ai_attr.facehuman.body_detect.enable=e.data.ai_attr.facehuman.body_detect.enable,this.formAi.ai_attr.facehuman.body_detect.draw_rect=e.data.ai_attr.facehuman.body_detect.draw_rect,this.formAi.ai_attr.facehuman.face_identify.enable=e.data.ai_attr.facehuman.face_identify.enable):(this.formAi.ai_attr.hvcfp.face_detect.enable=e.data.ai_attr.hvcfp.face_detect.enable,this.formAi.ai_attr.hvcfp.face_detect.draw_rect=e.data.ai_attr.hvcfp.face_detect.draw_rect,this.formAi.ai_attr.hvcfp.body_detect.enable=e.data.ai_attr.hvcfp.body_detect.enable,this.formAi.ai_attr.hvcfp.body_detect.draw_rect=e.data.ai_attr.hvcfp.body_detect.draw_rect,this.formAi.ai_attr.hvcfp.vechicle_detect.enable=e.data.ai_attr.hvcfp.vechicle_detect.enable,this.formAi.ai_attr.hvcfp.vechicle_detect.draw_rect=e.data.ai_attr.hvcfp.vechicle_detect.draw_rect,this.formAi.ai_attr.hvcfp.cycle_detect.enable=e.data.ai_attr.hvcfp.cycle_detect.enable,this.formAi.ai_attr.hvcfp.cycle_detect.draw_rect=e.data.ai_attr.hvcfp.cycle_detect.draw_rect,this.formAi.ai_attr.hvcfp.plate_detect.enable=e.data.ai_attr.hvcfp.plate_detect.enable,this.formAi.ai_attr.hvcfp.plate_detect.draw_rect=e.data.ai_attr.hvcfp.plate_detect.draw_rect,this.formAi.ai_attr.hvcfp.plate_identify.enable=e.data.ai_attr.hvcfp.plate_identify.enable),this.formAi.ai_attr.events.motion_detect.enable=e.data.ai_attr.events.motion_detect.enable,this.formAi.ai_attr.events.motion_detect.threshold_y=e.data.ai_attr.events.motion_detect.threshold_y,this.formAi.ai_attr.events.motion_detect.confidence=e.data.ai_attr.events.motion_detect.confidence,this.formAi.ai_attr.events.occlusion_detect.enable=e.data.ai_attr.events.occlusion_detect.enable,this.formAi.ai_attr.events.occlusion_detect.threshold_y=e.data.ai_attr.events.occlusion_detect.threshold_y,this.formAi.ai_attr.events.occlusion_detect.confidence=e.data.ai_attr.events.occlusion_detect.confidence,this.formAi.ai_attr.events.scene_change_detect.enable=e.data.ai_attr.events.scene_change_detect.enable,this.formAi.ai_attr.events.scene_change_detect.threshold_y=e.data.ai_attr.events.scene_change_detect.threshold_y,this.formAi.ai_attr.events.scene_change_detect.confidence=e.data.ai_attr.events.scene_change_detect.confidence)}catch(e){this.$message.error("获取信息失败")}}}},i=o,s=(a("5b01"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"d7a3c9d2",null);t["default"]=n.exports},f3e5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"video-preview-container"}),t("div",[t("el-form",{ref:"formVideoRef",attrs:{rules:e.formVideoRules,model:e.formVideo,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"主码流0"}}),t("el-form-item",{attrs:{label:"","label-width":"35px"}},[t("el-form-item",{attrs:{label:"码流控制"}},[t("el-select",{model:{value:e.formVideo.video0.rc_type,callback:function(t){e.$set(e.formVideo.video0,"rc_type",t)},expression:"formVideo.video0.rc_type"}},e._l(e.formVideo.rc_type_options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.formVideo.video0.rc_type,expression:"formVideo.video0.rc_type === 0"}],attrs:{label:"码流平滑"}},[t("el-slider",{attrs:{min:e.formVideo.video0.min_iprop,"show-input":""},model:{value:e.formVideo.video0.max_iprop,callback:function(t){e.$set(e.formVideo.video0,"max_iprop",t)},expression:"formVideo.video0.max_iprop"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"子码流1"}}),t("el-form-item",{attrs:{label:"","label-width":"35px"}},[t("el-form-item",{attrs:{label:"码流控制"}},[t("el-select",{model:{value:e.formVideo.video1.rc_type,callback:function(t){e.$set(e.formVideo.video1,"rc_type",t)},expression:"formVideo.video1.rc_type"}},e._l(e.formVideo.rc_type_options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.formVideo.video1.rc_type,expression:"formVideo.video1.rc_type === 0"}],attrs:{label:"码流平滑"}},[t("el-slider",{attrs:{min:e.formVideo.video1.min_iprop,"show-input":""},model:{value:e.formVideo.video1.max_iprop,callback:function(t){e.$set(e.formVideo.video1,"max_iprop",t)},expression:"formVideo.video1.max_iprop"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"","label-width":"0px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)])},l=[],o={data(){return{formVideo:{rc_type_options:[{label:"CBR",value:0},{label:"VBR",value:1},{label:"FIXQP",value:2}],video0:{rc_type:0,min_iprop:10,max_iprop:40},video1:{rc_type:0,min_iprop:10,max_iprop:40}},formVideoRules:{}}},created(){console.log("video++"),this.getInfo()},methods:{async onSubmit(){try{var e={};e=JSON.parse(JSON.stringify(this.formVideo));var t="setting/video";const{data:a}=await this.$http.post(t,e);console.log("video get return: ",a),200===a.meta.status?this.$message.success("修改成功"):this.$message.success("修改失败")}catch(a){this.$message.error("修改失败")}},async getInfo(){try{var e="setting/video";const{data:t}=await this.$http.get(e);console.log("video get return: ",t),200===t.meta.status&&(this.formVideo.video0=t.data.video0,this.formVideo.video1=t.data.video1)}catch(t){this.$message.error("获取信息失败")}}}},i=o,s=(a("962c"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"7b10abc5",null);t["default"]=n.exports},f50c:function(e,t,a){},fa85:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"system-container"},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:"APP版本"}},[t("el-input",{attrs:{readonly:""},model:{value:e.appVersion,callback:function(t){e.appVersion=t},expression:"appVersion"}})],1),t("el-form-item",{attrs:{label:"SDK版本"}},[t("el-input",{attrs:{readonly:""},model:{value:e.sdkVersion,callback:function(t){e.sdkVersion=t},expression:"sdkVersion"}})],1)],1)],1)},l=[],o={data(){return{appVersion:"--",sdkVersion:"--"}},created(){console.log("system++"),this.getInfo()},methods:{async getInfo(){try{const{data:e}=await this.$http.get("setting/system");console.log("system get return: ",e),200===e.meta.status&&(this.appVersion=e.data.appVersion,this.sdkVersion=e.data.sdkVersion)}catch(e){this.$message.error("获取信息失败")}}}},i=o,s=(a("6fbb"),a("2877")),n=Object(s["a"])(i,r,l,!1,null,"783a75d8",null);t["default"]=n.exports}}]);